{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\stefan\\\\Desktop\\\\ISA-front\\\\ISA-front\\\\src\\\\Pages\\\\UserProfile.js\";\nimport React, { Component } from \"react\";\nimport Axios from \"axios\";\nimport Header from '../Components/Header';\nimport GetAuthorisation from \"../Funciton/GetAuthorisation\";\nimport PharmacyLogoPicture from \"../Images/pharmacyLogo.jpg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:8080\";\n\nclass UserProfile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      email: \"\",\n      name: \"\",\n      surname: \"\",\n      password: \"\",\n      address: \"\",\n      phoneNumber: \"\",\n      redirect: false\n    };\n\n    this.hasRole = requestRole => {\n      let currentRoles = JSON.parse(localStorage.getItem(\"keyRole\"));\n      if (currentRoles === null) return false;\n\n      for (let currentRole of currentRoles) {\n        if (currentRole === requestRole) return true;\n      }\n\n      return false;\n    };\n\n    this.handleEmailChange = event => {\n      this.setState({\n        email: event.target.value\n      });\n    };\n\n    this.handleNameChange = event => {\n      this.setState({\n        name: event.target.value\n      });\n    };\n\n    this.handleSurnameChange = event => {\n      this.setState({\n        surname: event.target.value\n      });\n    };\n\n    this.handlePhoneNumberChange = event => {\n      this.setState({\n        phoneNumber: event.target.value\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (!this.hasRole(\"ROLE_PATIENT\")) {\n      this.setState({\n        redirect: true\n      });\n      this.props.history.push('/login');\n    } else {\n      console.log(GetAuthorisation());\n      Axios.get(API_URL + \"/users/patient\", {\n        validateStatus: () => true,\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        console.log(res.data);\n\n        if (res.status === 401) {\n          this.setState({\n            redirect: true\n          });\n        } else {\n          console.log(res.data.EntityDTO.email);\n          console.log(res.data.EntityDTO.name);\n          this.setState({\n            id: res.data.Id,\n            email: res.data.EntityDTO.email,\n            name: res.data.EntityDTO.name,\n            surname: res.data.EntityDTO.surname,\n            address: res.data.EntityDTO.address,\n            phoneNumber: res.data.EntityDTO.phoneNumber\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"userProfilePage\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \" text-center  mb-0 text-uppercase\",\n          style: {\n            marginTop: \"2rem\"\n          },\n          children: \"User profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row mt-5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col \",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \" text-center text-uppercase\",\n              children: \"Personal Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default UserProfile;","map":{"version":3,"sources":["C:/Users/stefan/Desktop/ISA-front/ISA-front/src/Pages/UserProfile.js"],"names":["React","Component","Axios","Header","GetAuthorisation","PharmacyLogoPicture","API_URL","UserProfile","constructor","props","state","id","email","name","surname","password","address","phoneNumber","redirect","hasRole","requestRole","currentRoles","JSON","parse","localStorage","getItem","currentRole","handleEmailChange","event","setState","target","value","handleNameChange","handleSurnameChange","handlePhoneNumberChange","componentDidMount","history","push","console","log","get","validateStatus","headers","Authorization","then","res","data","status","EntityDTO","Id","catch","err","render","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Axios from \"axios\";\r\nimport Header from '../Components/Header';\r\nimport GetAuthorisation from \"../Funciton/GetAuthorisation\";\r\nimport PharmacyLogoPicture from \"../Images/pharmacyLogo.jpg\" ;\r\nconst API_URL=\"http://localhost:8080\";\r\n\r\n\r\nclass UserProfile extends Component {\r\n\r\n    state = {\r\n\t\tid: \"\",\r\n\t\temail: \"\",\r\n        name: \"\",\r\n\t\tsurname: \"\",\r\n\t\tpassword: \"\",\r\n\t\taddress: \"\",\r\n\t\tphoneNumber: \"\",\r\n        redirect: false\r\n\t\t\r\n\t};\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n    hasRole = (requestRole) => {\r\n        let currentRoles = JSON.parse(localStorage.getItem(\"keyRole\"));\r\n  \r\n        if (currentRoles === null) return false;\r\n  \r\n  \r\n        for (let currentRole of currentRoles) {\r\n          if (currentRole === requestRole) return true;\r\n        }\r\n        return false;\r\n      };\r\n\r\n\t\r\n    handleEmailChange = (event) => {\r\n\t\tthis.setState({ email: event.target.value });\r\n\t};\r\n\r\n\thandleNameChange = (event) => {\r\n\t\tthis.setState({ name: event.target.value });\r\n\t};\r\n\r\n\thandleSurnameChange = (event) => {\r\n\t\tthis.setState({ surname: event.target.value });\r\n\t};\r\n\r\n\thandlePhoneNumberChange = (event) => {\r\n\t\tthis.setState({ phoneNumber: event.target.value });\r\n\t};\r\n\r\n\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (!this.hasRole(\"ROLE_PATIENT\")) {\r\n\t\t\tthis.setState({ redirect: true });\r\n\t\t\tthis.props.history.push('/login')\r\n\t\t\r\n        } else {\r\n\r\n\r\n\t\t\tconsole.log(GetAuthorisation());\r\n\r\n\t\t\tAxios.get(API_URL + \"/users/patient\", { validateStatus: () => true, headers: { Authorization : GetAuthorisation() } })\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\tif (res.status === 401) {                       \r\n                        this.setState({ redirect: true });\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.log(res.data.EntityDTO.email)\r\n\t\t\t\t\t\tconsole.log(res.data.EntityDTO.name)\r\n\r\n                        this.setState({\r\n\t\t\t\t\t\t\tid: res.data.Id,\r\n\t\t\t\t\t\t\temail: res.data.EntityDTO.email,\r\n\t\t\t\t\t\t\tname: res.data.EntityDTO.name,\r\n\t\t\t\t\t\t\tsurname: res.data.EntityDTO.surname,\r\n\t\t\t\t\t\t\taddress: res.data.EntityDTO.address,\r\n\t\t\t\t\t\t\tphoneNumber: res.data.EntityDTO.phoneNumber,\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n\trender() {\r\n\r\n        \r\n\t\treturn(\r\n\r\n            <React.Fragment>\r\n\r\n            <Header/>  \r\n\r\n            <div id=\"userProfilePage\">\r\n\r\n            <h4 className=\" text-center  mb-0 text-uppercase\" style={{ marginTop: \"2rem\" }}>\r\n\t\t\t\t\t\tUser profile\r\n\t\t\t</h4>\r\n\r\n            <div className=\"row mt-5\">\r\n\r\n\t\t\t\t\t<div className=\"col \">\r\n                        <h5 className=\" text-center text-uppercase\">Personal Information</h5>\r\n                        \r\n                    </div>\r\n\r\n\r\n\r\n\r\n            </div>\r\n\r\n\r\n            \r\n\r\n            </div>\r\n\r\n\r\n            </React.Fragment>\r\n\r\n\r\n        );\r\n        \r\n\t}\r\n\r\n\r\n}\r\n\r\nexport default UserProfile;"]},"metadata":{},"sourceType":"module"}