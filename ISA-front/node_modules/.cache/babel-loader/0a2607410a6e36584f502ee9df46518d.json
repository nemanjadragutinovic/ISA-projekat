{"ast":null,"code":"var _jsxFileName = \"E:\\\\aca\\\\isa\\\\nasa-isa\\\\ISA-projekat\\\\ISA-front\\\\src\\\\Components\\\\Modal\\\\AddActionPromotionModal.js\";\nimport React, { Component } from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport Axios from 'axios';\nimport GetAuthorisation from \"../../Funciton/GetAuthorisation\";\nimport DatePicker from \"react-datepicker\";\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:8080\";\n\nclass AddActionPromotionModal extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedStartDate: new Date(),\n      selectedEndDate: new Date(),\n      discount: '',\n      type: 'DRUGDISCOUNT'\n    };\n\n    this.handleStartDateChange = date => {\n      this.setState({\n        selectedStartDate: date\n      });\n\n      if (date > this.state.selectedEndDate) {\n        this.setState({\n          selectedEndDate: date\n        });\n      }\n    };\n\n    this.handleEndDateChange = date => {\n      this.setState({\n        selectedEndDate: date\n      });\n    };\n\n    this.handleDiscountChange = event => {\n      this.setState({\n        discount: event.target.value\n      });\n    };\n\n    this.handleAdd = () => {\n      let actionPromotionDTO = {\n        dateFrom: this.state.selectedStartDate,\n        dateTo: this.state.selectedEndDate,\n        discount: this.state.discount,\n        actionType: this.state.type\n      };\n      console.log(actionPromotionDTO);\n      Axios.post(API_URL + \"/pharmacy/addNewActionPromotion/\" + this.props.pharmacyId, actionPromotionDTO, {\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        if (res.status == 201) {\n          alert(\"New Action is created.\");\n        } else if (res.status == 400) {\n          alert(\"Date range is occupied\");\n        } else {\n          alert(\"Server error.\");\n        }\n\n        this.props.updateAction();\n      }).catch(err => {});\n    };\n\n    this.handleClickOnClose = () => {\n      this.setState({\n        selectedStartDate: new Date(),\n        selectedEndDate: new Date(),\n        discount: ''\n      });\n      this.props.onCloseModal();\n    };\n\n    this.handleDiscountForChange = event => {\n      this.setState({\n        type: event.target.value\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.state.selectedStartDate.setDate(this.state.selectedStartDate.getDate() + 1);\n    this.state.selectedEndDate.setDate(this.state.selectedStartDate.getDate() + 1);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      show: this.props.show,\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Add Action and Promotion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"control-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"table\", {\n              style: ({\n                width: '100%'\n              }, {\n                marginLeft: '27%'\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Date from:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                    className: \"form-control\",\n                    style: {\n                      width: \"15em\"\n                    },\n                    minDate: this.state.minDate,\n                    onChange: date => this.handleStartDateChange(date),\n                    selected: this.state.selectedStartDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Date to:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                    className: \"form-control\",\n                    style: {\n                      width: \"15em\"\n                    },\n                    minDate: this.state.selectedStartDate,\n                    onChange: date => this.handleEndDateChange(date),\n                    selected: this.state.selectedEndDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Percent of discount:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    placeholder: \"Discount (1-99)\",\n                    className: \"form-control\",\n                    style: {\n                      width: \"12em\"\n                    },\n                    type: \"number\",\n                    min: \"1\",\n                    max: \"99\",\n                    onChange: this.handleDiscountChange,\n                    value: this.state.discount\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Discount for\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"select\", {\n                    onChange: this.handleTypeChange,\n                    value: this.state.type,\n                    style: {\n                      width: \"11em\"\n                    },\n                    className: \"form-control mr-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"DRUGDISCOUNT\",\n                      children: \"Drugs\"\n                    }, \"1\", false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 140,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"EXAMINATIONDISCOUNT\",\n                      children: \"Examinations\"\n                    }, \"2\", false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 141,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"CONSULTATIONDISCOUNT\",\n                      children: \"Consultations\"\n                    }, \"3\", false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group text-center\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"mt-3\",\n                onClick: () => this.handleAdd(),\n                children: \"Add action and promotion\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 30\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => this.handleClickOnClose(),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default AddActionPromotionModal;","map":{"version":3,"sources":["E:/aca/isa/nasa-isa/ISA-projekat/ISA-front/src/Components/Modal/AddActionPromotionModal.js"],"names":["React","Component","Button","Modal","Axios","GetAuthorisation","DatePicker","Redirect","API_URL","AddActionPromotionModal","state","selectedStartDate","Date","selectedEndDate","discount","type","handleStartDateChange","date","setState","handleEndDateChange","handleDiscountChange","event","target","value","handleAdd","actionPromotionDTO","dateFrom","dateTo","actionType","console","log","post","props","pharmacyId","headers","Authorization","then","res","status","alert","updateAction","catch","err","handleClickOnClose","onCloseModal","handleDiscountForChange","componentDidMount","setDate","getDate","render","show","width","marginLeft","minDate","handleTypeChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport Axios from 'axios';\r\nimport GetAuthorisation from \"../../Funciton/GetAuthorisation\";\r\nimport DatePicker from \"react-datepicker\";\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst API_URL=\"http://localhost:8080\";\r\nclass AddActionPromotionModal extends Component {\r\n    state = {\r\n        selectedStartDate:new Date(),\r\n        selectedEndDate:new Date(),\r\n        discount:'',\r\n        type:'DRUGDISCOUNT',   \r\n    }\r\n\r\n    componentDidMount() {\r\n        this.state.selectedStartDate.setDate(this.state.selectedStartDate.getDate()+1)\r\n        this.state.selectedEndDate.setDate(this.state.selectedStartDate.getDate()+1)\r\n        \r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        this.setState({\r\n            selectedStartDate:date,\r\n        });\r\n\r\n        if(date>this.state.selectedEndDate){\r\n            this.setState({\r\n                selectedEndDate:date,\r\n            }); \r\n        }\r\n    }\r\n\r\n\r\n    handleEndDateChange = (date) => {\r\n        this.setState({selectedEndDate:date});\r\n    }\r\n\r\n    handleDiscountChange= (event) => {\r\n        this.setState({discount:event.target.value});\r\n        \r\n    }\r\n\r\n    handleAdd = () => {\r\n        let actionPromotionDTO = {\r\n            dateFrom: this.state.selectedStartDate, \r\n            dateTo:this.state.selectedEndDate,\r\n            discount:this.state.discount,\r\n            actionType: this.state.type, \r\n        };\r\n        console.log(actionPromotionDTO);\r\n        Axios\r\n        .post(API_URL + \"/pharmacy/addNewActionPromotion/\"+this.props.pharmacyId , actionPromotionDTO, {\r\n            headers: { Authorization:  GetAuthorisation() },\r\n        }).then((res) =>{\r\n           if(res.status==201){\r\n               alert(\"New Action is created.\")\r\n           }else if(res.status==400){\r\n               alert(\"Date range is occupied\")\r\n           }else{\r\n               alert(\"Server error.\")\r\n           }\r\n\r\n\r\n            this.props.updateAction();\r\n\r\n        }).catch((err) => {\r\n         \r\n        });\r\n    }\r\n\r\n    handleClickOnClose = () => {\r\n        this.setState({\r\n            selectedStartDate:new Date(),\r\n            selectedEndDate:new Date(),\r\n            discount:'',\r\n            \r\n        });\r\n        this.props.onCloseModal();\r\n    }\r\n\r\n   \r\n\r\n    handleDiscountForChange = (event) => {\r\n\t\tthis.setState({ type: event.target.value });\r\n\t};\r\n\r\n    render() { \r\n   \r\n\r\n        return ( \r\n            <Modal\r\n                show = {this.props.show}\r\n                centered\r\n                >\r\n                <Modal.Header >\r\n                    <Modal.Title >\r\n                    Add Action and Promotion\r\n                    </Modal.Title>\r\n\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                 \r\n                \r\n                             <form >\r\n                                    <div  className=\"control-group\" >\r\n                                        <table style={{width:'100%'},{marginLeft:'27%'}}>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <label >Date from:</label>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <DatePicker className=\"form-control\"  style={{width: \"15em\"}} minDate={this.state.minDate} onChange={date => this.handleStartDateChange(date)} selected={this.state.selectedStartDate}/>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <label>Date to:</label>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <DatePicker  className=\"form-control\" style={{width: \"15em\"}}  minDate={this.state.selectedStartDate} onChange={date => this.handleEndDateChange(date)} selected={this.state.selectedEndDate}/>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <label>Percent of discount:</label>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <input placeholder=\"Discount (1-99)\" className=\"form-control\" style={{width: \"12em\"}} type=\"number\" min=\"1\" max=\"99\" onChange={this.handleDiscountChange} value={this.state.discount} />\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <label>Discount for</label>\r\n                                                </td>\r\n                                                <td>\r\n                                                <select onChange={this.handleTypeChange} value={this.state.type} style={{ width: \"11em\" }} className=\"form-control mr-3\">\r\n\t\t\t\t\t\t\t\t                    <option key=\"1\" value=\"DRUGDISCOUNT\">Drugs</option>\r\n                                                    <option key=\"2\" value=\"EXAMINATIONDISCOUNT\">Examinations</option>\r\n\t\t\t\t\t\t\t\t                    <option key=\"3\" value=\"CONSULTATIONDISCOUNT\">Consultations</option>\r\n\t\t\t\t\t\t\t                    </select>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </table>\r\n                                        <div  className=\"form-group text-center\">\r\n                                            <Button className=\"mt-3\"  onClick = {() => this.handleAdd()} >Add action and promotion</Button>\r\n                                        </div>\r\n                                    </div>\r\n                                </form>\r\n\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button onClick={() => this.handleClickOnClose()}>Close</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n         );\r\n    }\r\n}\r\n \r\nexport default AddActionPromotionModal;"]},"metadata":{},"sourceType":"module"}