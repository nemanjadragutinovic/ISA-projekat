{"ast":null,"code":"var _jsxFileName = \"E:\\\\aca\\\\isa\\\\nasa-isa\\\\ISA-projekat\\\\ISA-front\\\\src\\\\Components\\\\SupplierPages\\\\OrdersPage.js\";\nimport { withRouter } from \"react-router\";\nimport Header from \"../../Components/Header\";\nimport Axios from \"axios\";\nimport GetAuthorisation from \"../../Funciton/GetAuthorisation\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport orderImage from \"../../Images/orderImage.png\";\nimport OfferModal from \"../../Components/SupplierPages/OfferModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass OrdersPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      price: \"\",\n      selectedDate: new Date(),\n      hours: new Date().getHours(),\n      minutes: new Date().getMinutes(),\n      replacingDrugs: [],\n      pharmacyName: \"\",\n      showOfferModal: false,\n      orderId: \"\",\n      showOrderModal: false,\n      openModalSuccess: false,\n      openModal: false,\n      openModalDrugs: false,\n      orders: [],\n      address: \"\",\n      redirect: false,\n      redirectUrl: ''\n    };\n\n    this.handlePriceChange = event => {\n      this.setState({\n        price: event.target.value\n      });\n    };\n\n    this.handleDateChange = date => {\n      this.setState({\n        selectedDate: date\n      });\n    };\n\n    this.handleMinutesChange = event => {\n      if (event.target.value > 59) this.setState({\n        minutes: 59\n      });else if (event.target.value < 0) this.setState({\n        minutes: 0\n      });else this.setState({\n        minutes: event.target.value\n      });\n    };\n\n    this.handleHoursChange = event => {\n      if (event.target.value > 23) this.setState({\n        hours: 23\n      });else if (event.target.value < 0) this.setState({\n        hours: 0\n      });else this.setState({\n        hours: event.target.value\n      });\n    };\n\n    this.handleOfferClick = order => {\n      this.setState({\n        price: \"\",\n        showOfferModal: true,\n        orderId: order.Id\n      });\n    };\n\n    this.handleModalClose = () => {\n      this.setState({\n        openModal: false\n      });\n    };\n\n    this.handleModalDrugsClose = () => {\n      this.setState({\n        openModalDrugs: false\n      });\n    };\n\n    this.handleModalSuccessClose = () => {\n      this.setState({\n        openModalSuccess: false\n      });\n    };\n\n    this.handleOrderClick = order => {\n      console.log(order, \"AA\");\n      this.setState({\n        showOrderModal: true,\n        address: order.pharmacy.EntityDTO.address.street + \", \" + order.pharmacy.EntityDTO.address.city + \", \" + order.pharmacy.EntityDTO.address.country,\n        pharmacyName: order.pharmacy.EntityDTO.name,\n        replacingDrugs: order.order\n      });\n    };\n\n    this.handleOfferModalClose = () => {\n      this.setState({\n        showOfferModal: false\n      });\n    };\n\n    this.handleOrderModalClose = () => {\n      this.setState({\n        showOrderModal: false\n      });\n    };\n\n    this.handleDateChange = date => {\n      this.setState({\n        selectedDate: date\n      });\n    };\n\n    this.handleOffer = () => {\n      if (this.state.price !== \"\") {\n        let offerDate = new Date(this.state.selectedDate.getFullYear(), this.state.selectedDate.getMonth(), this.state.selectedDate.getDate(), this.state.hours, this.state.minutes, 0, 0);\n        let OfferDTO = {\n          price: this.state.price,\n          dateToDelivery: offerDate,\n          id: this.state.orderId\n        };\n        Axios.put(\"http://localhost:8080/offer/drugsCheck\", OfferDTO, {\n          headers: {\n            Authorization: GetAuthorisation()\n          }\n        }).then(res => {\n          console.log(\"usao u drugs check\");\n          console.log(res.data);\n\n          if (res.data) {\n            Axios.post(\"http://localhost:8080/offer\", OfferDTO, {\n              headers: {\n                Authorization: GetAuthorisation()\n              }\n            }).then(res => {\n              this.setState({\n                openModalSuccess: true,\n                showOfferModal: false\n              });\n              Axios.get(\"http://localhost:8080/order/getAllOrders\", {\n                headers: {\n                  Authorization: GetAuthorisation()\n                }\n              }).then(res => {\n                console.log(res.data);\n                this.setState({\n                  orders: res.data\n                });\n              }).catch(err => {\n                console.log(\"GRESKA\");\n                console.log(err);\n              });\n            }).catch(err => {\n              console.log(\"CREATE GRESKA\");\n              console.log(err);\n            });\n          } else {\n            this.setState({\n              openModalDrugs: true\n            });\n          }\n        }).catch(err => {\n          console.log(\"GRESKA\");\n          console.log(err);\n        });\n        console.log(OfferDTO, \"AJDE RADI\");\n      } else {\n        this.setState({\n          openModal: true\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    Axios.get(\"http://localhost:8080/order/getAllOrders\", {\n      headers: {\n        Authorization: GetAuthorisation()\n      }\n    }).then(res => {\n      console.log(res.data);\n      this.setState({\n        orders: res.data\n      });\n    }).catch(err => {\n      console.log(\"GRESKA\");\n      console.log(err);\n    });\n  }\n\n  render() {\n    if (this.state.redirect) return /*#__PURE__*/_jsxDEV(Redirect, {\n      push: true,\n      to: this.state.redirectUrl\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 35\n    }, this);\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        style: {\n          marginTop: \"2%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \" text-center mb-0 mt-2 text-uppercase\",\n          children: \"Orders \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-hover\",\n          style: {\n            width: \"100%\",\n            marginTop: \"3rem\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.orders.map(order => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                width: \"190em\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"img-fluid\",\n                  src: orderImage,\n                  width: \"150em\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Date : \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 12\n                  }, this), \" \", new Date(order.EntityDTO.date).toLocaleTimeString(\"en-US\", {\n                    day: \"2-digit\",\n                    month: \"2-digit\",\n                    year: \"numeric\",\n                    hour: \"2-digit\",\n                    minute: \"2-digit\"\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Pharmacy : \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 12\n                  }, this), \" \", order.EntityDTO.pharmacy.EntityDTO.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Address: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 12\n                  }, this), \" \", order.EntityDTO.pharmacy.EntityDTO.address.street, \", \", order.EntityDTO.pharmacy.EntityDTO.address.city, \",\", \" \", order.EntityDTO.pharmacy.EntityDTO.address.country]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"align-middle\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => this.handleOfferClick(order),\n                    className: \"btn btn-outline-secondary\",\n                    children: \"Create an offer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 9\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(OfferModal, {\n        buttonName: \"Send offer\",\n        header: \"Make an offer\",\n        handlePriceChange: this.handlePriceChange,\n        show: this.state.showOfferModal,\n        price: this.state.price,\n        onCloseModal: this.handleOfferModalClose,\n        giveOffer: this.handleOffer,\n        handleDateChange: this.handleDateChange,\n        selectedDate: this.state.selectedDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(OrdersPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["E:/aca/isa/nasa-isa/ISA-projekat/ISA-front/src/Components/SupplierPages/OrdersPage.js"],"names":["withRouter","Header","Axios","GetAuthorisation","React","Component","Redirect","orderImage","OfferModal","OrdersPage","state","price","selectedDate","Date","hours","getHours","minutes","getMinutes","replacingDrugs","pharmacyName","showOfferModal","orderId","showOrderModal","openModalSuccess","openModal","openModalDrugs","orders","address","redirect","redirectUrl","handlePriceChange","event","setState","target","value","handleDateChange","date","handleMinutesChange","handleHoursChange","handleOfferClick","order","Id","handleModalClose","handleModalDrugsClose","handleModalSuccessClose","handleOrderClick","console","log","pharmacy","EntityDTO","street","city","country","name","handleOfferModalClose","handleOrderModalClose","handleOffer","offerDate","getFullYear","getMonth","getDate","OfferDTO","dateToDelivery","id","put","headers","Authorization","then","res","data","post","get","catch","err","componentDidMount","render","marginTop","width","map","toLocaleTimeString","day","month","year","hour","minute"],"mappings":"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","sourcesContent":["\r\n\r\nimport { withRouter } from \"react-router\";\r\nimport Header from \"../../Components/Header\";\r\nimport Axios from \"axios\";\r\nimport GetAuthorisation from \"../../Funciton/GetAuthorisation\";\r\nimport React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport orderImage from \"../../Images/orderImage.png\";\r\nimport OfferModal from \"../../Components/SupplierPages/OfferModal\";\r\n\r\n\r\n\r\nclass OrdersPage extends Component {\r\n\tstate = {\r\n\t\tprice: \"\",\r\n\t\tselectedDate: new Date(),\r\n\t\thours: new Date().getHours(),\r\n        minutes: new Date().getMinutes(),\r\n\t\treplacingDrugs:[],\r\n\t\tpharmacyName:\"\",\r\n\t\tshowOfferModal: false,\r\n\t\torderId: \"\",\r\n\t\tshowOrderModal: false,\r\n\t\topenModalSuccess: false,\r\n\t\topenModal: false,\r\n\t\topenModalDrugs: false,\r\n\t\torders:[],\r\n\t\taddress:\"\",\r\n        redirect: false,\r\n        redirectUrl: '',\r\n\t};\r\n\r\n    componentDidMount() {\r\n        Axios.get(\"http://localhost:8080/order/getAllOrders\", { headers: { Authorization: GetAuthorisation() } })\r\n                .then((res) => {\r\n                    console.log(res.data);\r\n                    this.setState({\r\n                        orders: res.data\r\n                    });\r\n                })\r\n                .catch((err) => {\r\n                    console.log(\"GRESKA\");\r\n                    console.log(err);\r\n                });\r\n        \r\n}\r\n\r\nhandlePriceChange = (event) => {\r\n\tthis.setState({ price: event.target.value });\r\n};\r\n\r\nhandleDateChange = (date) => {\r\n\tthis.setState({ selectedDate: date });\r\n};\r\n\r\nhandleMinutesChange = (event) => {\r\n\tif (event.target.value > 59) this.setState({ minutes: 59 });\r\n\telse if (event.target.value < 0) this.setState({ minutes: 0 });\r\n\telse this.setState({ minutes: event.target.value });\r\n};\r\n\r\nhandleHoursChange = (event) => {\r\n\tif (event.target.value > 23) this.setState({ hours: 23 });\r\n\telse if (event.target.value < 0) this.setState({ hours: 0 });\r\n\telse this.setState({ hours: event.target.value });\r\n};\r\n\r\nhandleOfferClick = (order) => {\r\n\tthis.setState({ \r\n\t\tprice: \"\",\r\n\t\tshowOfferModal: true,\r\n\t\torderId: order.Id,\r\n\t});\r\n\t\r\n};\r\n\r\nhandleModalClose = () => {\r\n\tthis.setState({ \r\n\t\topenModal: false,\r\n\t});\r\n};\r\n\r\nhandleModalDrugsClose = () => {\r\n\tthis.setState({ \r\n\t\topenModalDrugs: false,\r\n\t});\r\n};\r\n\r\nhandleModalSuccessClose = () => {\r\n\tthis.setState({ \r\n\t\topenModalSuccess: false,\r\n\t});\r\n};\r\n\r\nhandleOrderClick = (order) => {\r\n\tconsole.log(order,\"AA\");\r\n\tthis.setState({\r\n\t\t showOrderModal: true,\r\n\t\t address: order.pharmacy.EntityDTO.address.street +\", \"+ order.pharmacy.EntityDTO.address.city +\", \" +\r\n\t\t order.pharmacy.EntityDTO.address.country,\r\n\t\t pharmacyName: order.pharmacy.EntityDTO.name,\r\n\t\t replacingDrugs: order.order\r\n\t});\r\n};\r\n\r\nhandleOfferModalClose = () => {\r\n\tthis.setState({ showOfferModal: false });\r\n};\r\n\r\nhandleOrderModalClose = () => {\r\n\tthis.setState({ showOrderModal: false });\r\n};\r\n\r\nhandleDateChange = (date) => {\r\n\tthis.setState({ selectedDate: date });\r\n};\r\n\r\nhandleOffer = () => {\r\n\t\t\r\n\tif(this.state.price !==\"\"){\r\n\r\n\t\tlet offerDate = new Date(this.state.selectedDate.getFullYear(),this.state.selectedDate.getMonth(),this.state.selectedDate.getDate(),this.state.hours,this.state.minutes,0,0);\r\n\t\tlet OfferDTO = {\r\n\t\t\t\t\t\t\tprice: this.state.price,\r\n\t\t\t\t\t\t\tdateToDelivery: offerDate,\r\n\t\t\t\t\t\t\tid: this.state.orderId,\r\n\t\t\t\t\t\t}\r\n\t\tAxios.put(\"http://localhost:8080/offer/drugsCheck\", OfferDTO ,{ headers: { Authorization: GetAuthorisation() } })\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tconsole.log(\"usao u drugs check\");\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\tif(res.data){\r\n\t\t\t\t\t\tAxios.post(\"http://localhost:8080/offer\", OfferDTO ,{ headers: { Authorization: GetAuthorisation() } })\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\topenModalSuccess: true,\r\n\t\t\t\t\t\t\t\t\tshowOfferModal: false,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tAxios.get(\"http://localhost:8080/order/getAllOrders\", { headers: { Authorization: GetAuthorisation() } })\r\n\t\t\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\torders: res.data\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"GRESKA\");\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"CREATE GRESKA\");\r\n\t\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\topenModalDrugs: true,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.log(\"GRESKA\");\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\r\n\t\tconsole.log(OfferDTO, \"AJDE RADI\")\r\n\t}else{\r\n\t\tthis.setState({\r\n\t\t\topenModal: true,\r\n\t\t})\r\n\t}\r\n\t\t\r\n};\r\n\r\n\r\n    render() {\r\n\t\tif (this.state.redirect) return <Redirect push to={this.state.redirectUrl} />;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\r\n\t\t\t\t<Header />\r\n\r\n\t\t\t\t<div className=\"container\" style={{ marginTop: \"2%\" }}>\r\n\t\t\t\t\t<h5 className=\" text-center mb-0 mt-2 text-uppercase\">Orders </h5>\r\n\r\n\t\t\t\t\t<table className=\"table table-hover\" style={{ width: \"100%\", marginTop: \"3rem\" }}>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{this.state.orders.map((order) => (\r\n\t\t\t\t\t\t\t\t<tr className=\"rounded\">\r\n\t\t\t\t\t\t\t\t\t<td width=\"190em\">\r\n\t\t\t\t\t\t\t\t\t\t<img className=\"img-fluid\" src={orderImage}  width=\"150em\" />\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Date : </b>{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t{new Date(order.EntityDTO.date).toLocaleTimeString(\"en-US\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tday: \"2-digit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmonth: \"2-digit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tyear: \"numeric\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thour: \"2-digit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tminute: \"2-digit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Pharmacy : </b>{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t{order.EntityDTO.pharmacy.EntityDTO.name}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<b>Address: </b> {order.EntityDTO.pharmacy.EntityDTO.address.street}, {order.EntityDTO.pharmacy.EntityDTO.address.city},{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t{order.EntityDTO.pharmacy.EntityDTO.address.country}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2\" >\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.handleOfferClick(order)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-outline-secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tCreate an offer\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<OfferModal\r\n\t\t\t\t\tbuttonName=\"Send offer\"\r\n\t\t\t\t\theader=\"Make an offer\"\r\n\t\t\t\t\thandlePriceChange={this.handlePriceChange}\r\n\t\t\t\t\tshow={this.state.showOfferModal}\r\n\t\t\t\t\tprice={this.state.price}\r\n\t\t\t\t\tonCloseModal={this.handleOfferModalClose}\r\n\t\t\t\t\tgiveOffer={this.handleOffer}\r\n\t\t\t\t\thandleDateChange={this.handleDateChange}\r\n\t\t\t\t\tselectedDate={this.state.selectedDate}\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n}export default withRouter(OrdersPage);"]},"metadata":{},"sourceType":"module"}