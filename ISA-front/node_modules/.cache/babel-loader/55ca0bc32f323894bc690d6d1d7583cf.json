{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _api = require('../api');\n\nvar _api2 = _interopRequireDefault(_api);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar ImportObjectController = function () {\n  function ImportObjectController(map, data) {\n    _classCallCheck(this, ImportObjectController);\n\n    this._map = map;\n    this._data = data;\n\n    this._setupPresets();\n\n    this._setupGeoObjects();\n  }\n\n  _createClass(ImportObjectController, [{\n    key: 'destroy',\n    value: function destroy() {\n      this._clearPresets();\n\n      this._geoObject.removeFromMap(this._map);\n\n      this._geoObject = null;\n      this._map = null;\n    }\n  }, {\n    key: '_setupGeoObjects',\n    value: function _setupGeoObjects() {\n      var geoObjects = this._data.geoObjects;\n\n      var ymaps = _api2.default.getAPI();\n\n      if (!geoObjects) {\n        return;\n      }\n\n      this._geoObject = ymaps.geoQuery(this._prepare(geoObjects)).addToMap(this._map);\n    }\n  }, {\n    key: '_prepare',\n    value: function _prepare(collection) {\n      var updatedCollection = _extends({}, collection);\n\n      updatedCollection.features.forEach(function (feature) {\n        var props = feature.properties;\n\n        if (!props) {\n          return feature;\n        }\n\n        if (props.name) {\n          props.balloonContentHeader = props.name;\n        }\n\n        if (props.description) {\n          props.balloonContentBody = props.description;\n        }\n      });\n      return updatedCollection;\n    }\n  }, {\n    key: '_setupPresets',\n    value: function _setupPresets() {\n      var presetStorage = this._data.presetStorage;\n\n      var ymaps = _api2.default.getAPI();\n\n      if (!presetStorage) {\n        return;\n      }\n\n      this._presetKeys = Object.keys(presetStorage);\n\n      this._presetKeys.forEach(function (key) {\n        ymaps.option.presetStorage.add(key, presetStorage[key]);\n      });\n    }\n  }, {\n    key: '_clearPresets',\n    value: function _clearPresets() {\n      var ymaps = _api2.default.getAPI();\n\n      this._presetKeys.forEach(function (key) {\n        ymaps.option.presetStorage.remove(key);\n      });\n    }\n  }]);\n\n  return ImportObjectController;\n}();\n\nexports.default = ImportObjectController;","map":{"version":3,"sources":["E:/aca/isa/nasa-isa/ISA-projekat/ISA-front/node_modules/yandex-map-react/lib/controllers/ImportObjectController.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_api","require","_api2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","ImportObjectController","map","data","_map","_data","_setupPresets","_setupGeoObjects","destroy","_clearPresets","_geoObject","removeFromMap","geoObjects","ymaps","getAPI","geoQuery","_prepare","addToMap","collection","updatedCollection","features","forEach","feature","properties","name","balloonContentHeader","description","balloonContentBody","presetStorage","_presetKeys","keys","option","add","remove"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _api = require('../api');\n\nvar _api2 = _interopRequireDefault(_api);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ImportObjectController = function () {\n    function ImportObjectController(map, data) {\n        _classCallCheck(this, ImportObjectController);\n\n        this._map = map;\n        this._data = data;\n\n        this._setupPresets();\n        this._setupGeoObjects();\n    }\n\n    _createClass(ImportObjectController, [{\n        key: 'destroy',\n        value: function destroy() {\n            this._clearPresets();\n            this._geoObject.removeFromMap(this._map);\n            this._geoObject = null;\n            this._map = null;\n        }\n    }, {\n        key: '_setupGeoObjects',\n        value: function _setupGeoObjects() {\n            var geoObjects = this._data.geoObjects;\n\n            var ymaps = _api2.default.getAPI();\n\n            if (!geoObjects) {\n                return;\n            }\n\n            this._geoObject = ymaps.geoQuery(this._prepare(geoObjects)).addToMap(this._map);\n        }\n    }, {\n        key: '_prepare',\n        value: function _prepare(collection) {\n            var updatedCollection = _extends({}, collection);\n\n            updatedCollection.features.forEach(function (feature) {\n                var props = feature.properties;\n                if (!props) {\n                    return feature;\n                }\n                if (props.name) {\n                    props.balloonContentHeader = props.name;\n                }\n                if (props.description) {\n                    props.balloonContentBody = props.description;\n                }\n            });\n\n            return updatedCollection;\n        }\n    }, {\n        key: '_setupPresets',\n        value: function _setupPresets() {\n            var presetStorage = this._data.presetStorage;\n\n            var ymaps = _api2.default.getAPI();\n\n            if (!presetStorage) {\n                return;\n            }\n\n            this._presetKeys = Object.keys(presetStorage);\n            this._presetKeys.forEach(function (key) {\n                ymaps.option.presetStorage.add(key, presetStorage[key]);\n            });\n        }\n    }, {\n        key: '_clearPresets',\n        value: function _clearPresets() {\n            var ymaps = _api2.default.getAPI();\n            this._presetKeys.forEach(function (key) {\n                ymaps.option.presetStorage.remove(key);\n            });\n        }\n    }]);\n\n    return ImportObjectController;\n}();\n\nexports.default = ImportObjectController;"]},"metadata":{},"sourceType":"script"}