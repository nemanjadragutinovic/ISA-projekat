{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\faks\\\\4.god 1.semestar\\\\ISA\\\\ISA Projekat\\\\ISA-projekat\\\\ISA-front\\\\src\\\\Pages\\\\Appointment\\\\DermatologistCreateAndScheduleAppointment.js\";\nimport React, { Component } from \"react\";\nimport Header from \"../../Components/Header\";\nimport Axios from \"axios\";\nimport ModalDialog from \"../../Components/ModalDialog\";\nimport GetAuthorisation from '../../Funciton/GetAuthorisation';\nimport { withRouter } from \"react-router\";\nimport { Redirect } from \"react-router-dom\";\nimport DatePicker from \"react-datepicker\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:8080\";\n\nclass DermatologistCreateAndScheduleAppointment extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedDate: new Date(),\n      duration: 10,\n      periods: [],\n      price: 300,\n      openModalSuccess: false,\n      redirect: false,\n      redirectUrl: ''\n    };\n\n    this.handleDateChange = date => {\n      this.setState({\n        selectedDate: date\n      }, () => {\n        this.fetchPeriods();\n      });\n    };\n\n    this.handlePriceChange = event => {\n      if (event.target.value < 50) {\n        this.setState({\n          price: 50\n        });\n      } else {\n        this.setState({\n          price: event.target.value\n        });\n      }\n    };\n\n    this.handleSelectDurationChange = event => {\n      if (event.target.value >= 10 && event.target.value <= 60) {\n        this.setState({\n          duration: event.target.value\n        }, () => {\n          this.fetchPeriods();\n        });\n      }\n    };\n\n    this.fetchPeriods = () => {\n      Axios.get(API_URL + \"/appointment/free-periods-dermatologist\", {\n        params: {\n          datetime: this.state.selectedDate.getTime(),\n          duration: this.state.duration\n        },\n        validateStatus: () => true,\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        if (res.status === 401) {\n          this.setState({\n            redirect: true,\n            redirectUrl: \"/unauthorized\"\n          });\n        } else if (res.status === 200) {\n          this.setState({\n            periods: res.data\n          });\n          console.log(res.data);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleAppointment = selectedPeriod => {\n      let appointmentDTO = {\n        patientId: this.state.id,\n        startDateTime: selectedPeriod.startDate,\n        endDateTime: selectedPeriod.endDate,\n        price: this.state.price\n      };\n      Axios.post(API_URL + \"/appointment/create-and-schedule-appointment\", appointmentDTO, {\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.setState({\n          openModalSuccess: true\n        });\n      }).catch(err => {\n        alert(\"Appointment can't be created in selected period\");\n      });\n    };\n\n    this.handleModalSuccessClose = () => {\n      this.setState({\n        openModalSuccess: false,\n        redirect: true,\n        redirectUrl: \"/patient-profile/\" + this.state.id\n      });\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    this.setState({\n      id: id\n    });\n    this.fetchPeriods();\n  }\n\n  render() {\n    if (this.state.redirect) return /*#__PURE__*/_jsxDEV(Redirect, {\n      push: true,\n      to: this.state.redirectUrl\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 35\n    }, this);\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        style: {\n          marginTop: \"10%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \" text-left mb-0 mt-2 text-uppercase\",\n          style: {\n            color: \"#6c757d\"\n          },\n          children: \"Create and schedule Appointment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 mt-2\",\n          children: \"Select date and appointment duration and pick desired period to create and schedule appointment for patient\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"control-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"table\", {\n              style: {\n                width: '50%',\n                marginTop: '40px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                      className: \"text-right mr-3 mt-2\",\n                      children: \"Select date:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 132,\n                      columnNumber: 12\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                      style: {\n                        width: \"12em\"\n                      },\n                      className: \"form-control\",\n                      minDate: new Date(),\n                      onChange: date => this.handleDateChange(date),\n                      selected: this.state.selectedDate\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 135,\n                      columnNumber: 12\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                      className: \"text-right mr-3 mt-2\",\n                      children: \"Select duration:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 140,\n                      columnNumber: 12\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      style: {\n                        width: \"12.5em\"\n                      },\n                      placeholder: \"Duration\",\n                      className: \"form-control\",\n                      type: \"number\",\n                      min: \"10\",\n                      max: \"60\",\n                      step: \"5\",\n                      onChange: this.handleSelectDurationChange,\n                      value: this.state.duration\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 143,\n                      columnNumber: 12\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                      className: \"text-right mr-3 mt-2\",\n                      children: \"Price:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 12\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      style: {\n                        width: \"12.5em\"\n                      },\n                      placeholder: \"Price\",\n                      className: \"form-control\",\n                      type: \"number\",\n                      min: \"50\",\n                      step: \"50\",\n                      onChange: this.handlePriceChange,\n                      value: this.state.price\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 12\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                      className: \"text-left mr-3 mt-2\",\n                      children: \"Pick desired period to create and schedule appointment:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 156,\n                      columnNumber: 12\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-hover\",\n              style: {\n                width: \"27%\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: this.state.periods.map((period, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  hidden: new Date(period.startDate).getTime() < new Date().getTime(),\n                  value: period,\n                  onClick: () => this.handleAppointment(period),\n                  className: \"rounded\",\n                  style: {\n                    cursor: \"pointer\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [new Date(period.startDate).toLocaleTimeString(\"en-US\", {\n                        hour: \"2-digit\",\n                        minute: \"2-digit\"\n                      }), \" - \", new Date(period.endDate).toLocaleTimeString(\"en-US\", {\n                        hour: \"2-digit\",\n                        minute: \"2-digit\"\n                      })]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 175,\n                      columnNumber: 14\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 13\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 13\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 12\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ModalDialog, {\n        show: this.state.openModalSuccess,\n        onCloseModal: this.handleModalSuccessClose,\n        header: \"Successfully created and scheduled appointment for patient\",\n        text: \"Start examination for scheduled appointment.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(DermatologistCreateAndScheduleAppointment);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["C:/Users/PC/Desktop/faks/4.god 1.semestar/ISA/ISA Projekat/ISA-projekat/ISA-front/src/Pages/Appointment/DermatologistCreateAndScheduleAppointment.js"],"names":["React","Component","Header","Axios","ModalDialog","GetAuthorisation","withRouter","Redirect","DatePicker","API_URL","DermatologistCreateAndScheduleAppointment","state","selectedDate","Date","duration","periods","price","openModalSuccess","redirect","redirectUrl","handleDateChange","date","setState","fetchPeriods","handlePriceChange","event","target","value","handleSelectDurationChange","get","params","datetime","getTime","validateStatus","headers","Authorization","then","res","status","data","console","log","catch","err","handleAppointment","selectedPeriod","appointmentDTO","patientId","id","startDateTime","startDate","endDateTime","endDate","post","alert","handleModalSuccessClose","componentDidMount","props","match","render","marginTop","color","width","map","period","index","cursor","toLocaleTimeString","hour","minute"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Header from \"../../Components/Header\";\r\nimport Axios from \"axios\";\r\nimport ModalDialog from \"../../Components/ModalDialog\";\r\nimport GetAuthorisation from '../../Funciton/GetAuthorisation';\r\nimport { withRouter } from \"react-router\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport DatePicker from \"react-datepicker\";\r\nconst API_URL=\"http://localhost:8080\";\r\n\r\nclass DermatologistCreateAndScheduleAppointment extends Component {\r\n\tstate = {\r\n\t\tselectedDate: new Date(),\r\n\t\tduration: 10,\r\n\t\tperiods: [],\r\n\t\tprice: 300,\r\n\t\topenModalSuccess: false,\r\n\t\tredirect: false,\r\n        redirectUrl: ''\r\n\t}\r\n\r\n\thandleDateChange = (date) => {\r\n\t\tthis.setState({\r\n\t\t\tselectedDate: date,\r\n\t\t}, () => {\r\n\t\t\tthis.fetchPeriods();\r\n\t\t});\r\n\t}\r\n\r\n\thandlePriceChange = (event) => {\r\n\t\tif (event.target.value < 50) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tprice: 50,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tprice: event.target.value,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSelectDurationChange = (event) => {\r\n\t\tif (event.target.value >= 10 && event.target.value <= 60) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tduration: event.target.value\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.fetchPeriods();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfetchPeriods = () => {\r\n\t\tAxios.get(API_URL + \"/appointment/free-periods-dermatologist\", {\r\n\t\t\tparams: {\r\n\t\t\t\tdatetime: this.state.selectedDate.getTime(),\r\n\t\t\t\tduration: this.state.duration\r\n\t\t\t},\r\n\t\t\tvalidateStatus: () => true, headers: { Authorization: GetAuthorisation() }\r\n\t\t}).then((res) => {\r\n\t\t\tif (res.status === 401) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tredirect: true,\r\n\t\t\t\t\tredirectUrl: \"/unauthorized\"\r\n\t\t\t\t});\r\n\t\t\t} else if (res.status === 200) {\r\n\t\t\t\tthis.setState({ periods: res.data });\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst id = this.props.match.params.id;\r\n\t\tthis.setState({\r\n\t\t\tid: id\r\n\t\t});\r\n\t\tthis.fetchPeriods();\r\n\t}\r\n\r\n\thandleAppointment = (selectedPeriod) => {\r\n\r\n\t\tlet appointmentDTO = {\r\n\t\t\tpatientId: this.state.id,\r\n\t\t\tstartDateTime: selectedPeriod.startDate,\r\n\t\t\tendDateTime: selectedPeriod.endDate,\r\n\t\t\tprice: this.state.price,\t\t\t\r\n\t\t};\r\n\r\n\t\tAxios\r\n\t\t\t.post(API_URL + \"/appointment/create-and-schedule-appointment\", appointmentDTO, {\r\n\t\t\t\theaders: { Authorization: GetAuthorisation() },\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenModalSuccess: true,\r\n\t\t\t\t});\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\talert(\"Appointment can't be created in selected period\");\r\n\t\t\t});\r\n\t}\r\n\r\n\thandleModalSuccessClose = () => {\r\n\t\tthis.setState({\r\n\t\t\topenModalSuccess: false,\r\n\t\t\tredirect: true,\r\n\t\t\tredirectUrl: \"/patient-profile/\" + this.state.id\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tif (this.state.redirect) return <Redirect push to={this.state.redirectUrl} />;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Header />\r\n\r\n\t\t\t\t<div className=\"container\" style={{ marginTop: \"10%\" }}>\r\n\t\t\t\t\t<h4 className=\" text-left mb-0 mt-2 text-uppercase\" style={{ color: \"#6c757d\"}}>Create and schedule Appointment</h4>\r\n\t\t\t\t\t<p className=\"mb-0 mt-2\">\r\n\t\t\t\t\t\tSelect date and appointment duration and pick desired period to create and schedule appointment for patient\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<form >\r\n\t\t\t\t\t\t\t<div className=\"control-group\" >\r\n\t\t\t\t\t\t\t\t<table style={{ width: '50%', marginTop: '40px'}}>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<h6 className=\"text-right mr-3 mt-2\">Select date:</h6>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>  \r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker style={{width: \"12em\"}} className=\"form-control\" minDate={new Date()} onChange={date => this.handleDateChange(date)} selected={this.state.selectedDate} />\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<h6 className=\"text-right mr-3 mt-2\">Select duration:</h6>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<input style={{width: \"12.5em\"}} placeholder=\"Duration\" className=\"form-control\" type=\"number\" min=\"10\" max=\"60\" step=\"5\" onChange={this.handleSelectDurationChange} value={this.state.duration} />\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<h6 className=\"text-right mr-3 mt-2\">Price:</h6>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<input style={{width: \"12.5em\"}} placeholder=\"Price\" className=\"form-control\" type=\"number\" min=\"50\" step=\"50\" onChange={this.handlePriceChange} value={this.state.price} />\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<h5 className=\"text-left mr-3 mt-2\">Pick desired period to create and schedule appointment:</h5>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t<table className=\"table table-hover\" style={{ width: \"27%\"}} >\r\n\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t{this.state.periods.map((period, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\thidden={(new Date(period.startDate)).getTime() < (new Date()).getTime()}\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={period}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.handleAppointment(period)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"rounded\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{new Date(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tperiod.startDate\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleTimeString(\"en-US\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thour: \"2-digit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tminute: \"2-digit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" - \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{new Date(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tperiod.endDate\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleTimeString(\"en-US\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thour: \"2-digit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tminute: \"2-digit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ModalDialog\r\n\t\t\t\t\tshow={this.state.openModalSuccess}\r\n\t\t\t\t\tonCloseModal={this.handleModalSuccessClose}\r\n\t\t\t\t\theader=\"Successfully created and scheduled appointment for patient\"\r\n\t\t\t\t\ttext=\"Start examination for scheduled appointment.\"\r\n\t\t\t\t/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\nexport default withRouter(DermatologistCreateAndScheduleAppointment);"]},"metadata":{},"sourceType":"module"}