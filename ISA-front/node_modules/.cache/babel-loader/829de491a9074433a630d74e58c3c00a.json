{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\faks\\\\4.god 1.semestar\\\\ISA\\\\ISA Projekat\\\\ISA-projekat\\\\ISA-front\\\\src\\\\Pages\\\\Appointment\\\\ReservedDrug.js\";\nimport React, { Component } from \"react\";\nimport { Button } from 'react-bootstrap';\nimport Header from \"../../Components/Header\";\nimport Axios from \"axios\";\nimport DatePicker from \"react-datepicker\";\nimport ModalDialog from \"../../Components/ModalDialog\";\nimport GetAuthorisation from '../../Funciton/GetAuthorisation';\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:8080\";\n\nclass ReservedDrug extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      openModalSuccess: false,\n      redirect: false,\n      redirectUrl: '',\n      showError: \"none\",\n      reservationCode: \"\",\n      drugName: \"\",\n      drugManufacturer: \"\",\n      drugQuantity: \"\",\n      drugPrice: \"\",\n      endDate: \"\",\n      drugAmount: \"\",\n      reservationStatus: \"\",\n      displayDrug: \"none\",\n      id: \"\"\n    };\n\n    this.handleSearch = () => {\n      this.setState({\n        showError: 'none'\n      });\n      Axios.get(API_URL + \"/drug/reservation/\" + this.state.reservationCode, {\n        validateStatus: () => true,\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        if (res.status === 400) {\n          this.setState({\n            showError: 'inline'\n          });\n        } else if (res.status === 200) {\n          this.setState({\n            drugName: res.data.EntityDTO.drugInstance.EntityDTO.drugInstanceName,\n            drugQuantity: res.data.EntityDTO.drugInstance.EntityDTO.quantity,\n            drugPrice: res.data.EntityDTO.drugPeacePrice,\n            endDate: res.data.EntityDTO.endDate,\n            drugAmount: res.data.EntityDTO.amount,\n            reservationStatus: res.data.EntityDTO.reservationStatus,\n            displayDrug: 'inline',\n            id: res.data.Id\n          });\n          console.log(this.state);\n          console.log(res.data);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleProcessReservation = () => {\n      Axios.put(API_URL + \"/drug/process-reservation\", {\n        id: this.state.id\n      }, {\n        validateStatus: () => true,\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        if (res.status === 200) this.setState({\n          openModalSuccess: true\n        });\n        console.log(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleReservationCode = event => {\n      this.setState({\n        reservationCode: event.target.value\n      });\n    };\n\n    this.handleModalSuccessClose = () => {\n      this.setState({\n        openModalSuccess: false\n      });\n      window.location.reload();\n    };\n  }\n\n  componentDidMount() {\n    Axios.get(API_URL + \"/users/pharmacist/auth\", {\n      validateStatus: () => true,\n      headers: {\n        Authorization: GetAuthorisation()\n      }\n    }).then(res => {\n      if (res.status === 401) {\n        this.setState({\n          redirect: true,\n          redirectUrl: \"/unauthorized\"\n        });\n      } else {\n        console.log(res.data);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    if (this.state.redirect) return /*#__PURE__*/_jsxDEV(Redirect, {\n      push: true,\n      to: this.state.redirectUrl\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 41\n    }, this);\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        style: {\n          marginTop: \"10%\",\n          width: \"50%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-center\",\n          children: \"Search for drug reservations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Enter drug reservation code:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"text\",\n            onChange: this.handleReservationCode,\n            value: this.state.reservationCode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"text-danger m-1\",\n            style: {\n              display: this.state.showError\n            },\n            children: \"Active reservation not found for input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-primary mt-5\",\n              onClick: this.handleSearch,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"icofont-search mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 29\n              }, this), \"Search for drug reservation\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"ml-3 mt-5\",\n          style: {\n            display: this.state.displayDrug\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"control-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group controls\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                width: \"130em\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-col ml-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Name: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 45\n                    }, this), \" \", this.state.drugName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Manufacturer: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 141,\n                      columnNumber: 45\n                    }, this), \" \", this.state.drugManufacturer]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Quantity: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 45\n                    }, this), \" \", this.state.drugQuantity, \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"mg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 89\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Price by peace: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 45\n                    }, this), \" \", (Math.round(this.state.drugPrice * 100) / 100).toFixed(2), \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"din\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 129\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-col\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Reserved until: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 41\n                  }, this), \" \", new Date(this.state.endDate).toLocaleDateString(\"en-US\", {\n                    day: \"2-digit\",\n                    month: \"2-digit\",\n                    year: \"numeric\",\n                    hour: \"2-digit\",\n                    minute: \"2-digit\"\n                  }), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-col\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Drug amount: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 41\n                  }, this), \" \", this.state.drugAmount]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-col\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Total price: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 41\n                  }, this), \" \", (Math.round(this.state.drugAmount * this.state.drugPrice * 100) / 100).toFixed(2), \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"din\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-col\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Reservation status: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 41\n                  }, this), \" \", this.state.reservationStatus]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-primary mt-5\",\n              onClick: this.handleProcessReservation,\n              children: \"Process reservation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalDialog, {\n        show: this.state.openModalSuccess,\n        onCloseModal: this.handleModalSuccessClose,\n        header: \"Successfully issued drug reservation\",\n        text: \"Search for another one.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ReservedDrug;","map":{"version":3,"sources":["C:/Users/PC/Desktop/faks/4.god 1.semestar/ISA/ISA Projekat/ISA-projekat/ISA-front/src/Pages/Appointment/ReservedDrug.js"],"names":["React","Component","Button","Header","Axios","DatePicker","ModalDialog","GetAuthorisation","Redirect","API_URL","ReservedDrug","state","openModalSuccess","redirect","redirectUrl","showError","reservationCode","drugName","drugManufacturer","drugQuantity","drugPrice","endDate","drugAmount","reservationStatus","displayDrug","id","handleSearch","setState","get","validateStatus","headers","Authorization","then","res","status","data","EntityDTO","drugInstance","drugInstanceName","quantity","drugPeacePrice","amount","Id","console","log","catch","err","handleProcessReservation","put","handleReservationCode","event","target","value","handleModalSuccessClose","window","location","reload","componentDidMount","render","marginTop","width","display","Math","round","toFixed","Date","toLocaleDateString","day","month","year","hour","minute"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAsB,iBAAtB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,SAASC,QAAT,QAAyB,kBAAzB;;AACA,MAAMC,OAAO,GAAC,uBAAd;;AAEA,MAAMC,YAAN,SAA2BT,SAA3B,CAAqC;AAAA;AAAA;AAAA,SACjCU,KADiC,GACzB;AACJC,MAAAA,gBAAgB,EAAE,KADd;AAEJC,MAAAA,QAAQ,EAAE,KAFN;AAGJC,MAAAA,WAAW,EAAE,EAHT;AAIJC,MAAAA,SAAS,EAAE,MAJP;AAKJC,MAAAA,eAAe,EAAE,EALb;AAMJC,MAAAA,QAAQ,EAAE,EANN;AAOJC,MAAAA,gBAAgB,EAAE,EAPd;AAQJC,MAAAA,YAAY,EAAE,EARV;AASJC,MAAAA,SAAS,EAAE,EATP;AAUJC,MAAAA,OAAO,EAAE,EAVL;AAWJC,MAAAA,UAAU,EAAE,EAXR;AAYJC,MAAAA,iBAAiB,EAAE,EAZf;AAaJC,MAAAA,WAAW,EAAE,MAbT;AAcJC,MAAAA,EAAE,EAAE;AAdA,KADyB;;AAAA,SAmCjCC,YAnCiC,GAmClB,MAAM;AACjB,WAAKC,QAAL,CAAc;AACVZ,QAAAA,SAAS,EAAE;AADD,OAAd;AAGAX,MAAAA,KAAK,CAACwB,GAAN,CAAUnB,OAAO,GAAG,oBAAV,GAAiC,KAAKE,KAAL,CAAWK,eAAtD,EACI;AAAEa,QAAAA,cAAc,EAAE,MAAM,IAAxB;AAA8BC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAExB,gBAAgB;AAAjC;AAAvC,OADJ,EAEKyB,IAFL,CAEWC,GAAD,IAAS;AACX,YAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACpB,eAAKP,QAAL,CAAc;AACVZ,YAAAA,SAAS,EAAE;AADD,WAAd;AAGH,SAJD,MAIO,IAAIkB,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AAC3B,eAAKP,QAAL,CAAc;AACVV,YAAAA,QAAQ,EAAEgB,GAAG,CAACE,IAAJ,CAASC,SAAT,CAAmBC,YAAnB,CAAgCD,SAAhC,CAA0CE,gBAD1C;AAEVnB,YAAAA,YAAY,EAAEc,GAAG,CAACE,IAAJ,CAASC,SAAT,CAAmBC,YAAnB,CAAgCD,SAAhC,CAA0CG,QAF9C;AAGVnB,YAAAA,SAAS,EAAEa,GAAG,CAACE,IAAJ,CAASC,SAAT,CAAmBI,cAHpB;AAIVnB,YAAAA,OAAO,EAAEY,GAAG,CAACE,IAAJ,CAASC,SAAT,CAAmBf,OAJlB;AAKVC,YAAAA,UAAU,EAAEW,GAAG,CAACE,IAAJ,CAASC,SAAT,CAAmBK,MALrB;AAMVlB,YAAAA,iBAAiB,EAAEU,GAAG,CAACE,IAAJ,CAASC,SAAT,CAAmBb,iBAN5B;AAOVC,YAAAA,WAAW,EAAE,QAPH;AAQVC,YAAAA,EAAE,EAAEQ,GAAG,CAACE,IAAJ,CAASO;AARH,WAAd;AAUAC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKjC,KAAjB;AACAgC,UAAAA,OAAO,CAACC,GAAR,CAAYX,GAAG,CAACE,IAAhB;AACH;AACJ,OArBL,EAsBKU,KAtBL,CAsBYC,GAAD,IAAS;AACZH,QAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACH,OAxBL;AAyBH,KAhEgC;;AAAA,SAkEjCC,wBAlEiC,GAkEN,MAAM;AAC7B3C,MAAAA,KAAK,CAAC4C,GAAN,CAAUvC,OAAO,GAAG,2BAApB,EACL;AAAEgB,QAAAA,EAAE,EAAE,KAAKd,KAAL,CAAWc;AAAjB,OADK,EAEL;AAAEI,QAAAA,cAAc,EAAE,MAAM,IAAxB;AAA8BC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAExB,gBAAgB;AAAjC;AAAvC,OAFK,EAGJyB,IAHI,CAGEC,GAAD,IAAS;AACF,YAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EACR,KAAKP,QAAL,CAAc;AAAEf,UAAAA,gBAAgB,EAAE;AAApB,SAAd;AACJ+B,QAAAA,OAAO,CAACC,GAAR,CAAYX,GAAG,CAACE,IAAhB;AACA,OAPI,EAQJU,KARI,CAQGC,GAAD,IAAS;AACfH,QAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACA,OAVI;AAWH,KA9EgC;;AAAA,SAgFjCG,qBAhFiC,GAgFRC,KAAD,IAAW;AAC/B,WAAKvB,QAAL,CAAc;AAAEX,QAAAA,eAAe,EAAEkC,KAAK,CAACC,MAAN,CAAaC;AAAhC,OAAd;AACH,KAlFgC;;AAAA,SAoFjCC,uBApFiC,GAoFP,MAAM;AAC5B,WAAK1B,QAAL,CAAc;AACVf,QAAAA,gBAAgB,EAAE;AADR,OAAd;AAGA0C,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,KAzFgC;AAAA;;AAkBjCC,EAAAA,iBAAiB,GAAG;AAChBrD,IAAAA,KAAK,CAACwB,GAAN,CAAUnB,OAAO,GAAG,wBAApB,EAA8C;AAAEoB,MAAAA,cAAc,EAAE,MAAM,IAAxB;AAA8BC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAExB,gBAAgB;AAAjC;AAAvC,KAA9C,EACKyB,IADL,CACWC,GAAD,IAAS;AACX,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACpB,aAAKP,QAAL,CAAc;AACVd,UAAAA,QAAQ,EAAE,IADA;AAEVC,UAAAA,WAAW,EAAE;AAFH,SAAd;AAIH,OALD,MAKO;AACH6B,QAAAA,OAAO,CAACC,GAAR,CAAYX,GAAG,CAACE,IAAhB;AACH;AACJ,KAVL,EAWKU,KAXL,CAWYC,GAAD,IAAS;AACZH,MAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACH,KAbL;AAcH;;AA0DDY,EAAAA,MAAM,GAAG;AAEL,QAAI,KAAK/C,KAAL,CAAWE,QAAf,EAAyB,oBAAO,QAAC,QAAD;AAAU,MAAA,IAAI,MAAd;AAAe,MAAA,EAAE,EAAE,KAAKF,KAAL,CAAWG;AAA9B;AAAA;AAAA;AAAA;AAAA,YAAP;AAEzB,wBACI,QAAC,KAAD,CAAO,QAAP;AAAA,8BACI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cADJ,eAGI;AAAK,QAAA,SAAS,EAAC,WAAf;AAA2B,QAAA,KAAK,EAAE;AAAE6C,UAAAA,SAAS,EAAE,KAAb;AAAoBC,UAAAA,KAAK,EAAE;AAA3B,SAAlC;AAAA,gCACI;AAAI,UAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAKI;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AACI,YAAA,SAAS,EAAC,cADd;AAEI,YAAA,IAAI,EAAC,MAFT;AAGI,YAAA,QAAQ,EAAE,KAAKX,qBAHnB;AAII,YAAA,KAAK,EAAE,KAAKtC,KAAL,CAAWK;AAJtB;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAQI;AAAI,YAAA,SAAS,EAAC,iBAAd;AAAgC,YAAA,KAAK,EAAE;AAAE6C,cAAAA,OAAO,EAAE,KAAKlD,KAAL,CAAWI;AAAtB,aAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARJ,eASI;AAAA,mCACA;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAsB,cAAA,SAAS,EAAC,sBAAhC;AAAuD,cAAA,OAAO,EAAE,KAAKW,YAArE;AAAA,sCACI;AAAG,gBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,sBADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,kBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,eAqBI;AAAM,UAAA,SAAS,EAAC,WAAhB;AAA4B,UAAA,KAAK,EAAE;AAAEmC,YAAAA,OAAO,EAAE,KAAKlD,KAAL,CAAWa;AAAtB,WAAnC;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,eAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,qBAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,UAAf;AAA0B,gBAAA,KAAK,EAAC,OAAhC;AAAA,uCAEI;AAAK,kBAAA,SAAS,EAAC,eAAf;AAAA,0CACI;AAAA,4CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,OACmB,KAAKb,KAAL,CAAWM,QAD9B;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,eAII;AAAA,4CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,OAC2B,KAAKN,KAAL,CAAWO,gBADtC;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJJ,eAOI;AAAA,4CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,OACuB,KAAKP,KAAL,CAAWQ,YADlC,oBACgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADhD;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPJ,eAUI;AAAA,4CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,OAC6B,CAAC2C,IAAI,CAACC,KAAL,CAAW,KAAKpD,KAAL,CAAWS,SAAX,GAAuB,GAAlC,IAAyC,GAA1C,EAA+C4C,OAA/C,CAAuD,CAAvD,CAD7B,oBACwF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADxF;AAAA;AAAA;AAAA;AAAA;AAAA,0BAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBADJ,eAoBI;AAAA;AAAA;AAAA;AAAA,oBApBJ,eAqBI;AAAK,cAAA,SAAS,EAAC,UAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,UAAf;AAAA,uCACI;AAAA,0CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,EAC4B,GAD5B,EAEK,IAAIC,IAAJ,CAAS,KAAKtD,KAAL,CAAWU,OAApB,EAA6B6C,kBAA7B,CAAgD,OAAhD,EAAyD;AACtDC,oBAAAA,GAAG,EAAE,SADiD;AAEtDC,oBAAAA,KAAK,EAAE,SAF+C;AAGtDC,oBAAAA,IAAI,EAAE,SAHgD;AAItDC,oBAAAA,IAAI,EAAE,SAJgD;AAKtDC,oBAAAA,MAAM,EAAE;AAL8C,mBAAzD,CAFL,EAQQ,GARR;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBArBJ,eAmCI;AAAK,cAAA,SAAS,EAAC,UAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,UAAf;AAAA,uCACI;AAAA,0CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,OAC0B,KAAK5D,KAAL,CAAWW,UADrC;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAnCJ,eA0CI;AAAK,cAAA,SAAS,EAAC,UAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,UAAf;AAAA,uCACI;AAAA,0CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,OAC0B,CAACwC,IAAI,CAACC,KAAL,CAAW,KAAKpD,KAAL,CAAWW,UAAX,GAAwB,KAAKX,KAAL,CAAWS,SAAnC,GAA+C,GAA1D,IAAiE,GAAlE,EAAuE4C,OAAvE,CAA+E,CAA/E,CAD1B,EAC6G,GAD7G,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBA1CJ,eAkDI;AAAK,cAAA,SAAS,EAAC,UAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,UAAf;AAAA,uCACI;AAAA,0CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,OACiC,KAAKrD,KAAL,CAAWY,iBAD5C;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAlDJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eA2DI;AAAA,mCACI;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAsB,cAAA,SAAS,EAAC,sBAAhC;AAAuD,cAAA,OAAO,EAAE,KAAKwB,wBAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBA3DJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,eA2FI,QAAC,WAAD;AACI,QAAA,IAAI,EAAE,KAAKpC,KAAL,CAAWC,gBADrB;AAEI,QAAA,YAAY,EAAE,KAAKyC,uBAFvB;AAGI,QAAA,MAAM,EAAC,sCAHX;AAII,QAAA,IAAI,EAAC;AAJT;AAAA;AAAA;AAAA;AAAA,cA3FJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAoGH;;AAnMgC;;AAsMrC,eAAe3C,YAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Button} from 'react-bootstrap';\r\nimport Header from \"../../Components/Header\";\r\nimport Axios from \"axios\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport ModalDialog from \"../../Components/ModalDialog\";\r\nimport GetAuthorisation from '../../Funciton/GetAuthorisation';\r\nimport { Redirect } from \"react-router-dom\";\r\nconst API_URL=\"http://localhost:8080\";\r\n\r\nclass ReservedDrug extends Component {\r\n    state = {\r\n        openModalSuccess: false,\r\n        redirect: false,\r\n        redirectUrl: '',\r\n        showError: \"none\",\r\n        reservationCode: \"\",\r\n        drugName: \"\",\r\n        drugManufacturer: \"\",\r\n        drugQuantity: \"\",\r\n        drugPrice: \"\",\r\n        endDate: \"\",\r\n        drugAmount: \"\",\r\n        reservationStatus: \"\",\r\n        displayDrug: \"none\",\r\n        id: \"\"\r\n    };\r\n\r\n    componentDidMount() {\r\n        Axios.get(API_URL + \"/users/pharmacist/auth\", { validateStatus: () => true, headers: { Authorization: GetAuthorisation() } })\r\n            .then((res) => {\r\n                if (res.status === 401) {\r\n                    this.setState({\r\n                        redirect: true,\r\n                        redirectUrl: \"/unauthorized\"\r\n                    });\r\n                } else {\r\n                    console.log(res.data);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    handleSearch = () => {\r\n        this.setState({\r\n            showError: 'none'\r\n        });\r\n        Axios.get(API_URL + \"/drug/reservation/\" + this.state.reservationCode,\r\n            { validateStatus: () => true, headers: { Authorization: GetAuthorisation() } })\r\n            .then((res) => {\r\n                if (res.status === 400) {\r\n                    this.setState({\r\n                        showError: 'inline'\r\n                    });\r\n                } else if (res.status === 200) {\r\n                    this.setState({\r\n                        drugName: res.data.EntityDTO.drugInstance.EntityDTO.drugInstanceName,\r\n                        drugQuantity: res.data.EntityDTO.drugInstance.EntityDTO.quantity,\r\n                        drugPrice: res.data.EntityDTO.drugPeacePrice,\r\n                        endDate: res.data.EntityDTO.endDate,\r\n                        drugAmount: res.data.EntityDTO.amount,\r\n                        reservationStatus: res.data.EntityDTO.reservationStatus,\r\n                        displayDrug: 'inline',\r\n                        id: res.data.Id\r\n                    });\r\n                    console.log(this.state)\r\n                    console.log(res.data);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    };\r\n\r\n    handleProcessReservation = () => {\r\n        Axios.put(API_URL + \"/drug/process-reservation\",\r\n\t\t\t{ id: this.state.id },\r\n\t\t\t{ validateStatus: () => true, headers: { Authorization: GetAuthorisation() } })\r\n\t\t\t.then((res) => {\r\n                if (res.status === 200)\r\n\t\t\t\t    this.setState({ openModalSuccess: true});\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n    };\r\n\r\n    handleReservationCode = (event) => {\r\n        this.setState({ reservationCode: event.target.value });\r\n    };\r\n\r\n    handleModalSuccessClose = () => {\r\n        this.setState({\r\n            openModalSuccess: false\r\n        });\r\n        window.location.reload();\r\n    };\r\n\r\n    render() {\r\n\r\n        if (this.state.redirect) return <Redirect push to={this.state.redirectUrl} />;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Header />\r\n\r\n                <div className=\"container\" style={{ marginTop: \"10%\", width: \"50%\" }}>\r\n                    <h3 className=\"text-center\">\r\n                        Search for drug reservations\r\n\t\t\t\t\t</h3>\r\n\r\n                    <div className=\"mt-5\">\r\n                        <h5>Enter drug reservation code:</h5>\r\n                        <input\r\n                            className=\"form-control\"\r\n                            type=\"text\"\r\n                            onChange={this.handleReservationCode}\r\n                            value={this.state.reservationCode}\r\n                        />\r\n                        <h5 className=\"text-danger m-1\" style={{ display: this.state.showError }}>Active reservation not found for input</h5>\r\n                        <div>\r\n                        <button type=\"button\" className=\"btn btn-primary mt-5\" onClick={this.handleSearch}>\r\n                            <i className=\"icofont-search mr-1\"></i>\r\n                            Search for drug reservation\r\n                        </button>\r\n                        </div>\r\n                    </div>\r\n                    <form className=\"ml-3 mt-5\" style={{ display: this.state.displayDrug }}>\r\n                        <div className=\"control-group\">\r\n                            <div className=\"form-group controls\">\r\n                                <div className=\"form-row\" width=\"130em\">\r\n                                   \r\n                                    <div className=\"form-col ml-3\">\r\n                                        <div>\r\n                                            <b>Name: </b> {this.state.drugName}\r\n                                        </div>\r\n                                        <div>\r\n                                            <b>Manufacturer: </b> {this.state.drugManufacturer}\r\n                                        </div>\r\n                                        <div>\r\n                                            <b>Quantity: </b> {this.state.drugQuantity} <b>mg</b>\r\n                                        </div>\r\n                                        <div>\r\n                                            <b>Price by peace: </b> {(Math.round(this.state.drugPrice * 100) / 100).toFixed(2)} <b>din</b>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <br />\r\n                            <div className=\"form-row\">\r\n                                <div className=\"form-col\">\r\n                                    <div>\r\n                                        <b>Reserved until: </b>{\" \"}\r\n                                        {new Date(this.state.endDate).toLocaleDateString(\"en-US\", {\r\n                                            day: \"2-digit\",\r\n                                            month: \"2-digit\",\r\n                                            year: \"numeric\",\r\n                                            hour: \"2-digit\",\r\n                                            minute: \"2-digit\",\r\n                                        })}{\" \"}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-row\">\r\n                                <div className=\"form-col\">\r\n                                    <div>\r\n                                        <b>Drug amount: </b> {this.state.drugAmount}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-row\">\r\n                                <div className=\"form-col\">\r\n                                    <div>\r\n                                        <b>Total price: </b> {(Math.round(this.state.drugAmount * this.state.drugPrice * 100) / 100).toFixed(2)}{\" \"}\r\n                                        <b>din</b>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-row\">\r\n                                <div className=\"form-col\">\r\n                                    <div>\r\n                                        <b>Reservation status: </b> {this.state.reservationStatus}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <button type=\"button\" className=\"btn btn-primary mt-5\" onClick={this.handleProcessReservation}>\r\n                                    Process reservation\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                \r\n                <ModalDialog\r\n                    show={this.state.openModalSuccess}\r\n                    onCloseModal={this.handleModalSuccessClose}\r\n                    header=\"Successfully issued drug reservation\"\r\n                    text=\"Search for another one.\"\r\n                />\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ReservedDrug;"]},"metadata":{},"sourceType":"module"}