{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = loadApi;\n\nvar _fetchScript = require('./fetchScript');\n\nvar _fetchScript2 = _interopRequireDefault(_fetchScript);\n\nvar _configs = require('../../configs');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar loadPromise = void 0;\nvar enabledAPIParams = ['lang', 'apikey', 'coordorder', 'load', 'mode'];\nvar successCallbackName = '_$_api_success';\nvar errorCallbackName = '_$_api_error';\nvar defaultOptions = {\n  lang: 'ru_RU',\n  coordorder: 'latlong',\n  load: 'package.full',\n  mode: 'release',\n  ns: '',\n  onload: successCallbackName,\n  onerror: errorCallbackName\n};\n\nfunction generateURL(options) {\n  var params = Object.assign({}, defaultOptions);\n  Object.keys(options).filter(function (key) {\n    return enabledAPIParams.indexOf(key) !== -1;\n  }).forEach(function (key) {\n    params[key] = options[key];\n  });\n  var queryString = Object.keys(params).map(function (key) {\n    return key + '=' + params[key];\n  }).join('&');\n  return 'https://' + _configs.apiConfig.host + '/' + (options.version || _configs.apiConfig.version) + '/?' + queryString;\n}\n\nfunction loadApi(options) {\n  if (loadPromise) {\n    return loadPromise;\n  }\n\n  loadPromise = new Promise(function (resolve, reject) {\n    window[successCallbackName] = function (ymaps) {\n      resolve(ymaps);\n      window[successCallbackName] = null;\n    };\n\n    window[errorCallbackName] = function (error) {\n      reject(error);\n      window[errorCallbackName] = null;\n    };\n\n    (0, _fetchScript2.default)(generateURL(options));\n  });\n  return loadPromise;\n}","map":{"version":3,"sources":["E:/aca/isa/nasa-isa/ISA-projekat/ISA-front/node_modules/yandex-map-react/lib/utils/loaders/loadApi.js"],"names":["Object","defineProperty","exports","value","default","loadApi","_fetchScript","require","_fetchScript2","_interopRequireDefault","_configs","obj","__esModule","loadPromise","enabledAPIParams","successCallbackName","errorCallbackName","defaultOptions","lang","coordorder","load","mode","ns","onload","onerror","generateURL","options","params","assign","keys","filter","key","indexOf","forEach","queryString","map","join","apiConfig","host","version","Promise","resolve","reject","window","ymaps","error"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = loadApi;\n\nvar _fetchScript = require('./fetchScript');\n\nvar _fetchScript2 = _interopRequireDefault(_fetchScript);\n\nvar _configs = require('../../configs');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar loadPromise = void 0;\n\nvar enabledAPIParams = ['lang', 'apikey', 'coordorder', 'load', 'mode'];\nvar successCallbackName = '_$_api_success';\nvar errorCallbackName = '_$_api_error';\n\nvar defaultOptions = {\n    lang: 'ru_RU',\n    coordorder: 'latlong',\n    load: 'package.full',\n    mode: 'release',\n    ns: '',\n    onload: successCallbackName,\n    onerror: errorCallbackName\n};\n\nfunction generateURL(options) {\n    var params = Object.assign({}, defaultOptions);\n    Object.keys(options).filter(function (key) {\n        return enabledAPIParams.indexOf(key) !== -1;\n    }).forEach(function (key) {\n        params[key] = options[key];\n    });\n\n    var queryString = Object.keys(params).map(function (key) {\n        return key + '=' + params[key];\n    }).join('&');\n\n    return 'https://' + _configs.apiConfig.host + '/' + (options.version || _configs.apiConfig.version) + '/?' + queryString;\n}\n\nfunction loadApi(options) {\n    if (loadPromise) {\n        return loadPromise;\n    }\n\n    loadPromise = new Promise(function (resolve, reject) {\n\n        window[successCallbackName] = function (ymaps) {\n            resolve(ymaps);\n            window[successCallbackName] = null;\n        };\n\n        window[errorCallbackName] = function (error) {\n            reject(error);\n            window[errorCallbackName] = null;\n        };\n\n        (0, _fetchScript2.default)(generateURL(options));\n    });\n\n    return loadPromise;\n}"]},"metadata":{},"sourceType":"script"}