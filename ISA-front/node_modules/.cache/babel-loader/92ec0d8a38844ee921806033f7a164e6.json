{"ast":null,"code":"/*\r\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\n\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n\n  if (!window.navigator.mediaDevices) {\n    return;\n  } // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n\n\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\n    return;\n  }\n\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    return getSourceId(constraints).then(sourceId => {\n      const widthSpecified = constraints.video && constraints.video.width;\n      const heightSpecified = constraints.video && constraints.video.height;\n      const frameRateSpecified = constraints.video && constraints.video.frameRate;\n      constraints.video = {\n        mandatory: {\n          chromeMediaSource: 'desktop',\n          chromeMediaSourceId: sourceId,\n          maxFrameRate: frameRateSpecified || 3\n        }\n      };\n\n      if (widthSpecified) {\n        constraints.video.mandatory.maxWidth = widthSpecified;\n      }\n\n      if (heightSpecified) {\n        constraints.video.mandatory.maxHeight = heightSpecified;\n      }\n\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    });\n  };\n}","map":{"version":3,"sources":["C:/Users/stefan/Desktop/ISA-projekat/ISA-projekat/ISA-front/node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js"],"names":["shimGetDisplayMedia","window","getSourceId","navigator","mediaDevices","console","error","getDisplayMedia","constraints","then","sourceId","widthSpecified","video","width","heightSpecified","height","frameRateSpecified","frameRate","mandatory","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","getUserMedia"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA,OAAO,SAASA,mBAAT,CAA6BC,MAA7B,EAAqCC,WAArC,EAAkD;AACvD,MAAID,MAAM,CAACE,SAAP,CAAiBC,YAAjB,IACF,qBAAqBH,MAAM,CAACE,SAAP,CAAiBC,YADxC,EACsD;AACpD;AACD;;AACD,MAAI,CAAEH,MAAM,CAACE,SAAP,CAAiBC,YAAvB,EAAsC;AACpC;AACD,GAPsD,CAQvD;AACA;;;AACA,MAAI,OAAOF,WAAP,KAAuB,UAA3B,EAAuC;AACrCG,IAAAA,OAAO,CAACC,KAAR,CAAc,sDACV,YADJ;AAEA;AACD;;AACDL,EAAAA,MAAM,CAACE,SAAP,CAAiBC,YAAjB,CAA8BG,eAA9B,GACE,SAASA,eAAT,CAAyBC,WAAzB,EAAsC;AACpC,WAAON,WAAW,CAACM,WAAD,CAAX,CACJC,IADI,CACCC,QAAQ,IAAI;AAChB,YAAMC,cAAc,GAAGH,WAAW,CAACI,KAAZ,IAAqBJ,WAAW,CAACI,KAAZ,CAAkBC,KAA9D;AACA,YAAMC,eAAe,GAAGN,WAAW,CAACI,KAAZ,IACtBJ,WAAW,CAACI,KAAZ,CAAkBG,MADpB;AAEA,YAAMC,kBAAkB,GAAGR,WAAW,CAACI,KAAZ,IACzBJ,WAAW,CAACI,KAAZ,CAAkBK,SADpB;AAEAT,MAAAA,WAAW,CAACI,KAAZ,GAAoB;AAClBM,QAAAA,SAAS,EAAE;AACTC,UAAAA,iBAAiB,EAAE,SADV;AAETC,UAAAA,mBAAmB,EAAEV,QAFZ;AAGTW,UAAAA,YAAY,EAAEL,kBAAkB,IAAI;AAH3B;AADO,OAApB;;AAOA,UAAIL,cAAJ,EAAoB;AAClBH,QAAAA,WAAW,CAACI,KAAZ,CAAkBM,SAAlB,CAA4BI,QAA5B,GAAuCX,cAAvC;AACD;;AACD,UAAIG,eAAJ,EAAqB;AACnBN,QAAAA,WAAW,CAACI,KAAZ,CAAkBM,SAAlB,CAA4BK,SAA5B,GAAwCT,eAAxC;AACD;;AACD,aAAOb,MAAM,CAACE,SAAP,CAAiBC,YAAjB,CAA8BoB,YAA9B,CAA2ChB,WAA3C,CAAP;AACD,KArBI,CAAP;AAsBD,GAxBH;AAyBD","sourcesContent":["/*\r\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n/* eslint-env node */\r\n'use strict';\r\nexport function shimGetDisplayMedia(window, getSourceId) {\r\n  if (window.navigator.mediaDevices &&\r\n    'getDisplayMedia' in window.navigator.mediaDevices) {\r\n    return;\r\n  }\r\n  if (!(window.navigator.mediaDevices)) {\r\n    return;\r\n  }\r\n  // getSourceId is a function that returns a promise resolving with\r\n  // the sourceId of the screen/window/tab to be shared.\r\n  if (typeof getSourceId !== 'function') {\r\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\r\n        'a function');\r\n    return;\r\n  }\r\n  window.navigator.mediaDevices.getDisplayMedia =\r\n    function getDisplayMedia(constraints) {\r\n      return getSourceId(constraints)\r\n        .then(sourceId => {\r\n          const widthSpecified = constraints.video && constraints.video.width;\r\n          const heightSpecified = constraints.video &&\r\n            constraints.video.height;\r\n          const frameRateSpecified = constraints.video &&\r\n            constraints.video.frameRate;\r\n          constraints.video = {\r\n            mandatory: {\r\n              chromeMediaSource: 'desktop',\r\n              chromeMediaSourceId: sourceId,\r\n              maxFrameRate: frameRateSpecified || 3\r\n            }\r\n          };\r\n          if (widthSpecified) {\r\n            constraints.video.mandatory.maxWidth = widthSpecified;\r\n          }\r\n          if (heightSpecified) {\r\n            constraints.video.mandatory.maxHeight = heightSpecified;\r\n          }\r\n          return window.navigator.mediaDevices.getUserMedia(constraints);\r\n        });\r\n    };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}