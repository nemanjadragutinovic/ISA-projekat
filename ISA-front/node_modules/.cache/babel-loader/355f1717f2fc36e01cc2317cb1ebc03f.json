{"ast":null,"code":"var _jsxFileName = \"E:\\\\aca\\\\isa\\\\nasa-isa\\\\ISA-projekat\\\\ISA-front\\\\src\\\\Components\\\\Modal\\\\AddActionPromotionModal.js\";\nimport React, { Component } from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport Axios from 'axios';\nimport GetAuthorisation from \"../../Funciton/GetAuthorisation\";\nimport DatePicker from \"react-datepicker\";\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:8080\";\n\nclass AddActionPromotionModal extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedStartDate: new Date(),\n      selectedEndDate: new Date(),\n      percentOfDiscount: '',\n      discountFor: 'DRUGDISCOUNT',\n      hiddenSuccessAlert: true,\n      successHeader: \"\",\n      successMessage: \"\",\n      hiddenFailAlert: true,\n      failHeader: \"\",\n      failMessage: \"\",\n      minDate: new Date()\n    };\n\n    this.handleStartDateChange = date => {\n      this.setState({\n        selectedStartDate: date\n      });\n\n      if (date > this.state.selectedEndDate) {\n        this.setState({\n          selectedEndDate: date\n        });\n      }\n    };\n\n    this.handleEndDateChange = date => {\n      this.setState({\n        selectedEndDate: date\n      });\n    };\n\n    this.handlePercentOfDiscountChange = event => {\n      this.setState({\n        percentOfDiscount: event.target.value\n      });\n    };\n\n    this.handleAdd = () => {\n      let actionPromotionDTO = {\n        dateFrom: this.state.selectedStartDate,\n        dateTo: this.state.selectedEndDate,\n        discount: this.state.percentOfDiscount,\n        actionType: this.state.discountFor\n      };\n      console.log(actionPromotionDTO);\n      Axios.post(API_URL + \"/pharmacy/addNewActionPromotion/\" + this.props.pharmacyId, actionPromotionDTO, {\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(res => {\n        this.setState({\n          hiddenSuccessAlert: false,\n          hiddenFailAlert: true,\n          successHeader: \"Success\",\n          successMessage: \"You successfully add action and promotion for pharmacy.\"\n        });\n        this.props.updateAction();\n      }).catch(err => {\n        this.setState({\n          hiddenSuccessAlert: true,\n          hiddenFailAlert: false,\n          failHeader: \"Unsuccess\",\n          failMessage: \"It is not possible to add action\"\n        });\n      });\n    };\n\n    this.handleClickOnClose = () => {\n      this.setState({\n        selectedStartDate: new Date(),\n        selectedEndDate: new Date(),\n        percentOfDiscount: '',\n        hiddenSuccessAlert: true,\n        hiddenFailAlert: true\n      });\n      this.props.onCloseModal();\n    };\n\n    this.handleCloseAlertSuccess = () => {\n      this.setState({\n        hiddenSuccessAlert: true\n      });\n    };\n\n    this.handleCloseAlertFail = () => {\n      this.setState({\n        hiddenFailAlert: true\n      });\n    };\n\n    this.handleDiscountForChange = event => {\n      this.setState({\n        discountFor: event.target.value\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.state.selectedStartDate.setDate(this.state.selectedStartDate.getDate() + 1);\n    this.state.selectedEndDate.setDate(this.state.selectedStartDate.getDate() + 1);\n    this.state.minDate.setDate(this.state.selectedStartDate.getDate() + 1);\n  }\n\n  render() {\n    if (this.state.unauthorizedRedirect) return /*#__PURE__*/_jsxDEV(Redirect, {\n      push: true,\n      to: \"/unauthorized\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 53\n    }, this);\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      show: this.props.show,\n      size: \"lg\",\n      dialogClassName: \"modal-120w-100h\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          style: {\n            marginLeft: '33%'\n          },\n          id: \"contained-modal-title-vcenter\",\n          children: this.props.header\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"control-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"table\", {\n              style: ({\n                width: '100%'\n              }, {\n                marginLeft: '27%'\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Date from:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                    className: \"form-control\",\n                    style: {\n                      width: \"15em\"\n                    },\n                    minDate: this.state.minDate,\n                    onChange: date => this.handleStartDateChange(date),\n                    selected: this.state.selectedStartDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Date to:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                    className: \"form-control\",\n                    style: {\n                      width: \"15em\"\n                    },\n                    minDate: this.state.selectedStartDate,\n                    onChange: date => this.handleEndDateChange(date),\n                    selected: this.state.selectedEndDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Percent of discount:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    placeholder: \"Discount (1-99)\",\n                    className: \"form-control\",\n                    style: {\n                      width: \"12.8em\"\n                    },\n                    type: \"number\",\n                    min: \"1\",\n                    max: \"99\",\n                    onChange: this.handlePercentOfDiscountChange,\n                    value: this.state.percentOfDiscount\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Discount for\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"select\", {\n                    onChange: this.handleDiscountForChange,\n                    value: this.state.discountFor,\n                    style: {\n                      width: \"9em\"\n                    },\n                    className: \"form-control mr-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"DRUGDISCOUNT\",\n                      children: \"Drugs\"\n                    }, \"1\", false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"EXAMINATIONDISCOUNT\",\n                      children: \"Examinations\"\n                    }, \"2\", false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"CONSULTATIONDISCOUNT\",\n                      children: \"Consultations\"\n                    }, \"3\", false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 162,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group text-center\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"mt-3\",\n                onClick: () => this.handleAdd(),\n                children: \"Add action and promotion\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 30\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => this.handleClickOnClose(),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default AddActionPromotionModal;","map":{"version":3,"sources":["E:/aca/isa/nasa-isa/ISA-projekat/ISA-front/src/Components/Modal/AddActionPromotionModal.js"],"names":["React","Component","Button","Modal","Axios","GetAuthorisation","DatePicker","Redirect","API_URL","AddActionPromotionModal","state","selectedStartDate","Date","selectedEndDate","percentOfDiscount","discountFor","hiddenSuccessAlert","successHeader","successMessage","hiddenFailAlert","failHeader","failMessage","minDate","handleStartDateChange","date","setState","handleEndDateChange","handlePercentOfDiscountChange","event","target","value","handleAdd","actionPromotionDTO","dateFrom","dateTo","discount","actionType","console","log","post","props","pharmacyId","headers","Authorization","then","res","updateAction","catch","err","handleClickOnClose","onCloseModal","handleCloseAlertSuccess","handleCloseAlertFail","handleDiscountForChange","componentDidMount","setDate","getDate","render","unauthorizedRedirect","show","marginLeft","header","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport Axios from 'axios';\r\nimport GetAuthorisation from \"../../Funciton/GetAuthorisation\";\r\nimport DatePicker from \"react-datepicker\";\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst API_URL=\"http://localhost:8080\";\r\nclass AddActionPromotionModal extends Component {\r\n    state = {\r\n        selectedStartDate:new Date(),\r\n        selectedEndDate:new Date(),\r\n        percentOfDiscount:'',\r\n        discountFor:'DRUGDISCOUNT',\r\n        hiddenSuccessAlert: true,\r\n\t\tsuccessHeader: \"\",\r\n\t\tsuccessMessage: \"\",\r\n\t\thiddenFailAlert: true,\r\n\t\tfailHeader: \"\",\r\n\t\tfailMessage: \"\",    \r\n        minDate:new Date()\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.state.selectedStartDate.setDate(this.state.selectedStartDate.getDate()+1)\r\n        this.state.selectedEndDate.setDate(this.state.selectedStartDate.getDate()+1)\r\n        this.state.minDate.setDate(this.state.selectedStartDate.getDate()+1)\r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        this.setState({\r\n            selectedStartDate:date,\r\n        });\r\n\r\n        if(date>this.state.selectedEndDate){\r\n            this.setState({\r\n                selectedEndDate:date,\r\n            }); \r\n        }\r\n    }\r\n\r\n\r\n    handleEndDateChange = (date) => {\r\n        this.setState({selectedEndDate:date});\r\n    }\r\n\r\n    handlePercentOfDiscountChange= (event) => {\r\n        this.setState({percentOfDiscount:event.target.value});\r\n        \r\n    }\r\n\r\n    handleAdd = () => {\r\n        let actionPromotionDTO = {\r\n            dateFrom: this.state.selectedStartDate, \r\n            dateTo:this.state.selectedEndDate,\r\n            discount:this.state.percentOfDiscount,\r\n            actionType: this.state.discountFor, \r\n        };\r\n        console.log(actionPromotionDTO);\r\n        Axios\r\n        .post(API_URL + \"/pharmacy/addNewActionPromotion/\"+this.props.pharmacyId , actionPromotionDTO, {\r\n            headers: { Authorization:  GetAuthorisation() },\r\n        }).then((res) =>{\r\n            this.setState({\r\n                hiddenSuccessAlert: false,\r\n                hiddenFailAlert:true,\r\n                successHeader: \"Success\",\r\n                successMessage: \"You successfully add action and promotion for pharmacy.\",\r\n            })\r\n\r\n            this.props.updateAction();\r\n\r\n        }).catch((err) => {\r\n            this.setState({ \r\n                hiddenSuccessAlert: true,\r\n                hiddenFailAlert: false, \r\n                failHeader: \"Unsuccess\", \r\n                failMessage: \"It is not possible to add action\"});\r\n        });\r\n    }\r\n\r\n    handleClickOnClose = () => {\r\n        this.setState({\r\n            selectedStartDate:new Date(),\r\n            selectedEndDate:new Date(),\r\n            percentOfDiscount:'',\r\n            hiddenSuccessAlert:true,\r\n            hiddenFailAlert:true,\r\n        });\r\n        this.props.onCloseModal();\r\n    }\r\n\r\n    handleCloseAlertSuccess = () => {\r\n\t\tthis.setState({ hiddenSuccessAlert: true });\r\n    };\r\n    \r\n    handleCloseAlertFail = () => {\r\n\t\tthis.setState({ hiddenFailAlert: true });\r\n\t};\r\n\r\n    handleDiscountForChange = (event) => {\r\n\t\tthis.setState({ discountFor: event.target.value });\r\n\t};\r\n\r\n    render() { \r\n        if (this.state.unauthorizedRedirect) return <Redirect push to=\"/unauthorized\" />;\r\n\r\n        return ( \r\n            <Modal\r\n                show = {this.props.show}\r\n                size = \"lg\"\r\n                dialogClassName=\"modal-120w-100h\"\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n                >\r\n                <Modal.Header >\r\n                    <Modal.Title style={{marginLeft:'33%'}} id=\"contained-modal-title-vcenter\">\r\n                        {this.props.header}\r\n\r\n                    </Modal.Title>\r\n\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                 \r\n                \r\n                             <form >\r\n                                    <div  className=\"control-group\" >\r\n                                        <table style={{width:'100%'},{marginLeft:'27%'}}>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <label >Date from:</label>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <DatePicker className=\"form-control\"  style={{width: \"15em\"}} minDate={this.state.minDate} onChange={date => this.handleStartDateChange(date)} selected={this.state.selectedStartDate}/>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <label>Date to:</label>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <DatePicker  className=\"form-control\" style={{width: \"15em\"}}  minDate={this.state.selectedStartDate} onChange={date => this.handleEndDateChange(date)} selected={this.state.selectedEndDate}/>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <label>Percent of discount:</label>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <input placeholder=\"Discount (1-99)\" className=\"form-control\" style={{width: \"12.8em\"}} type=\"number\" min=\"1\" max=\"99\" onChange={this.handlePercentOfDiscountChange} value={this.state.percentOfDiscount} />\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <label>Discount for</label>\r\n                                                </td>\r\n                                                <td>\r\n                                                <select onChange={this.handleDiscountForChange} value={this.state.discountFor} style={{ width: \"9em\" }} className=\"form-control mr-3\">\r\n\t\t\t\t\t\t\t\t                    <option key=\"1\" value=\"DRUGDISCOUNT\">Drugs</option>\r\n                                                    <option key=\"2\" value=\"EXAMINATIONDISCOUNT\">Examinations</option>\r\n\t\t\t\t\t\t\t\t                    <option key=\"3\" value=\"CONSULTATIONDISCOUNT\">Consultations</option>\r\n\t\t\t\t\t\t\t                    </select>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </table>\r\n                                        <div  className=\"form-group text-center\">\r\n                                            <Button className=\"mt-3\"  onClick = {() => this.handleAdd()} >Add action and promotion</Button>\r\n                                        </div>\r\n                                    </div>\r\n                                </form>\r\n\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button onClick={() => this.handleClickOnClose()}>Close</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n         );\r\n    }\r\n}\r\n \r\nexport default AddActionPromotionModal;"]},"metadata":{},"sourceType":"module"}