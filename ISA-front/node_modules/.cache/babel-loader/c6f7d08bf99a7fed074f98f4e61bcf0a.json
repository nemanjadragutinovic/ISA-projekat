{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\neman\\\\OneDrive\\\\Radna povr\\u0161ina\\\\isa projekat\\\\ISA-projekat\\\\ISA-front\\\\src\\\\Components\\\\AdminStaffComplains.js\";\nimport React, { Component } from \"react\";\nimport Axios from \"axios\";\nimport Header from './Header';\nimport ReportImage from \"../Images/report.png\";\nimport GetAuthorisation from \"../Funciton/GetAuthorisation\";\nimport CreateComplaintModal from \"../Components/CreateComplaintModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AdminStaffComplains extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      complaints: [],\n      date: new Date(),\n      text: \"\",\n      staffName: \"\",\n      staffSurname: \"\",\n      profession: \"\",\n      reply: \"\",\n      email: \"\",\n      complaintId: \"\",\n      showComplaintModal: false\n    };\n\n    this.handleReplyClick = complaint => {\n      console.log(complaint);\n      this.setState({\n        date: complaint.EntityDTO.date,\n        text: complaint.EntityDTO.text,\n        staffName: complaint.EntityDTO.staffName,\n        staffSurname: complaint.EntityDTO.staffSurname,\n        profession: complaint.EntityDTO.profession,\n        reply: complaint.EntityDTO.reply,\n        email: complaint.EntityDTO.email,\n        showComplaintModal: true\n      });\n    };\n\n    this.handleComplaintChange = event => {\n      this.setState({\n        reply: event.target.value\n      });\n    };\n\n    this.handleComplaintModalClose = () => {\n      this.setState({\n        showComplaintModal: false\n      });\n    };\n\n    this.handleSendReply = () => {\n      let ComplaintStaffDTO = {\n        reply: this.state.reply\n      };\n      Axios.post(\"http://localhost:8080/complaint\", ComplaintStaffDTO, {\n        validateStatus: () => true,\n        headers: {\n          Authorization: GetAuthorisation()\n        }\n      }).then(resp => {\n        if (resp.status === 500) {\n          this.setState({\n            hiddenFailAlert: false,\n            failHeader: \"Internal server error\",\n            failMessage: \"Server error.\"\n          });\n        } else if (resp.status === 201) {}\n\n        this.setState({\n          showComplaintModal: false\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    Axios.get(\"http://localhost:8080/complaint/getStaffComplaints\", {\n      validateStatus: () => true,\n      headers: {\n        Authorization: GetAuthorisation()\n      }\n    }).then(res => {\n      if (res.status === 401) {\n        this.props.history.push('/login');\n      } else {\n        this.setState({\n          complaints: res.data\n        });\n        console.log(res.data);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \" text-center  mb-0 text-uppercase\",\n        style: {\n          marginTop: \"2rem\"\n        },\n        children: \"Staff complaints\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(CreateComplaintModal, {\n        buttonName: \"Send reply\",\n        header: \"Reply to complaint\",\n        handleComplaintChange: this.handleComplaintChange,\n        show: this.state.showComplaintModal,\n        onCloseModal: this.handleComplaintModalClose,\n        giveFeedback: this.handleComaplaint,\n        name: this.state.staffName + \" \" + this.state.staffSurname,\n        forWho: \"consultant\",\n        handleClickIcon: this.handleClickIcon,\n        complaint: this.state.complaint\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default AdminStaffComplains;","map":{"version":3,"sources":["C:/Users/neman/OneDrive/Radna povrÅ¡ina/isa projekat/ISA-projekat/ISA-front/src/Components/AdminStaffComplains.js"],"names":["React","Component","Axios","Header","ReportImage","GetAuthorisation","CreateComplaintModal","AdminStaffComplains","state","complaints","date","Date","text","staffName","staffSurname","profession","reply","email","complaintId","showComplaintModal","handleReplyClick","complaint","console","log","setState","EntityDTO","handleComplaintChange","event","target","value","handleComplaintModalClose","handleSendReply","ComplaintStaffDTO","post","validateStatus","headers","Authorization","then","resp","status","hiddenFailAlert","failHeader","failMessage","catch","err","componentDidMount","get","res","props","history","push","data","render","marginTop","handleComaplaint","handleClickIcon"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Axios from \"axios\";\r\nimport Header from './Header';\r\nimport ReportImage from \"../Images/report.png\" ;\r\nimport GetAuthorisation from \"../Funciton/GetAuthorisation\";\r\nimport CreateComplaintModal from \"../Components/CreateComplaintModal\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass AdminStaffComplains extends Component {\r\n\r\n\r\n\r\n  state = {\r\n    complaints : [],\r\n    date : new Date(),\r\n    text : \"\",\r\n    staffName : \"\",\r\n    staffSurname : \"\",\r\n    profession : \"\",\r\n    reply : \"\",\r\n    email : \"\",\r\n    complaintId : \"\",\r\n    showComplaintModal : false,\r\n  \r\n\r\n\r\n};\r\n\r\n\r\n\r\n  componentDidMount() {\r\n\r\n    Axios.get(\"http://localhost:8080/complaint/getStaffComplaints\", {\r\n\t\t\tvalidateStatus: () => true,\r\n\t\t\theaders: { Authorization: GetAuthorisation() },\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res.status === 401) {\r\n          this.props.history.push('/login');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ complaints: res.data });\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  handleReplyClick = (complaint) => {\r\n\t\tconsole.log(complaint);\r\n\t\tthis.setState({\r\n\t\t\tdate : complaint.EntityDTO.date,\r\n      text : complaint.EntityDTO.text,\r\n      staffName : complaint.EntityDTO.staffName,\r\n      staffSurname : complaint.EntityDTO.staffSurname,\r\n      profession : complaint.EntityDTO.profession,\r\n      reply : complaint.EntityDTO.reply,\r\n      email : complaint.EntityDTO.email,\r\n\t\t\tshowComplaintModal: true,\r\n\t\t});\r\n\t};\r\n\r\n  handleComplaintChange = (event) => {\r\n\t\tthis.setState({ reply: event.target.value });\r\n\t};\r\n  handleComplaintModalClose = () => {\r\n\t\tthis.setState({ showComplaintModal: false });\r\n\t};\r\n\r\n  handleSendReply = () => {\r\n\t\tlet ComplaintStaffDTO = {\r\n\t\t\treply: this.state.reply,\r\n     \r\n\t\t};\r\n\r\n\t\tAxios.post(\"http://localhost:8080/complaint\", ComplaintStaffDTO, { validateStatus: () => true, headers: { Authorization: GetAuthorisation() } })\r\n\t\t\t.then((resp) => {\r\n\t\t\t\tif (resp.status === 500) {\r\n\t\t\t\t\tthis.setState({ hiddenFailAlert: false, failHeader: \"Internal server error\", failMessage: \"Server error.\" });\r\n\t\t\t\t} else if (resp.status === 201) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({ showComplaintModal: false });\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t};\r\n\r\n\r\n\r\n\r\n    render() {\r\n\t\r\n\r\n\t\treturn (\r\n      \r\n      <React.Fragment>\r\n\r\n      <Header/>\r\n\r\n      <h5 className=\" text-center  mb-0 text-uppercase\" style={{ marginTop: \"2rem\" }}>\r\n\t\t\t\t\t\tStaff complaints\r\n\t\t\t\t</h5>\r\n\r\n\r\n        \r\n\r\n          <CreateComplaintModal\r\n\t\t\t\t\tbuttonName=\"Send reply\"\r\n\t\t\t\t\theader=\"Reply to complaint\"\r\n\t\t\t\t\thandleComplaintChange={this.handleComplaintChange}\r\n\t\t\t\t\tshow={this.state.showComplaintModal}\r\n\t\t\t\t\tonCloseModal={this.handleComplaintModalClose}\r\n\t\t\t\t\tgiveFeedback={this.handleComaplaint}\r\n\t\t\t\t\tname={this.state.staffName + \" \" + this.state.staffSurname}\r\n\t\t\t\t\tforWho=\"consultant\"\r\n\t\t\t\t\thandleClickIcon={this.handleClickIcon}\r\n\t\t\t\t\tcomplaint={this.state.complaint}\r\n\t\t\t\t/>\r\n      </React.Fragment>\r\n        \r\n\t\t);\r\n        }\r\n\r\n}\r\nexport default AdminStaffComplains;"]},"metadata":{},"sourceType":"module"}