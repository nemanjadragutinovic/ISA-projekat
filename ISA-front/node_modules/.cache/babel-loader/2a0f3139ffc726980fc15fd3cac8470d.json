{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _BalloonLayout = require('./BalloonLayout');\n\nvar _BalloonLayout2 = _interopRequireDefault(_BalloonLayout);\n\nvar _MarkerLayout = require('./MarkerLayout');\n\nvar _MarkerLayout2 = _interopRequireDefault(_MarkerLayout);\n\nvar _MarkerController = require('./controllers/MarkerController');\n\nvar _MarkerController2 = _interopRequireDefault(_MarkerController);\n\nvar _geoObject = require('./apiEventsLists/geoObject');\n\nvar _geoObject2 = _interopRequireDefault(_geoObject);\n\nvar _decorators = require('./utils/decorators');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar MapMarker = function (_Component) {\n  _inherits(MapMarker, _Component);\n\n  function MapMarker(props) {\n    _classCallCheck(this, MapMarker);\n\n    var _this = _possibleConstructorReturn(this, (MapMarker.__proto__ || Object.getPrototypeOf(MapMarker)).call(this, props));\n\n    _this.options = {};\n    return _this;\n  }\n\n  _createClass(MapMarker, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      var _props = this.props,\n          lat = _props.lat,\n          lon = _props.lon,\n          children = _props.children,\n          properties = _props.properties,\n          options = _props.options,\n          balloonState = _props.balloonState;\n\n      if (lat !== prevProps.lat || lon !== prevProps.lon) {\n        this._controller.setPosition(this.context.coordorder === 'longlat' ? [lon, lat] : [lat, lon]);\n      }\n\n      Object.keys(properties || {}).forEach(function (propName) {\n        if (!prevProps.properties || properties[propName] !== prevProps.properties[propName]) {\n          _this2._controller.setProperty(propName, properties[propName]);\n        }\n      });\n      Object.keys(options || {}).forEach(function (optName) {\n        if (!prevProps.options || options[optName] !== prevProps.options[optName]) {\n          _this2._controller.setOption(optName, options[optName]);\n        }\n      });\n\n      this._controller.setBalloonState(balloonState);\n\n      if (children != prevProps.children) {\n        this._clearLayouts();\n\n        this._setupLayouts();\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props2 = this.props,\n          lat = _props2.lat,\n          lon = _props2.lon,\n          properties = _props2.properties,\n          options = _props2.options,\n          balloonState = _props2.balloonState;\n      var coords = this.context.coordorder === 'longlat' ? [lon, lat] : [lat, lon];\n      this._controller = new _MarkerController2.default(coords, properties, options, balloonState);\n\n      this._setupLayouts();\n\n      this._setupEvents();\n\n      this.context.mapController.appendMarker(this._controller);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this._clearLayouts();\n\n      this._controller.destroy();\n    }\n  }, {\n    key: 'getController',\n    value: function getController() {\n      return this._controller ? this._controller : null;\n    }\n  }, {\n    key: '_setupLayouts',\n    value: function _setupLayouts() {\n      var _this3 = this;\n\n      _react2.default.Children.toArray(this.props.children).forEach(function (component) {\n        if (component.type === _BalloonLayout2.default) {\n          _this3._setupBalloonLayout(component);\n        }\n\n        if (component.type === _MarkerLayout2.default) {\n          _this3._setupMarkerLayout(component);\n        }\n      });\n    }\n  }, {\n    key: '_setupMarkerLayout',\n    value: function _setupMarkerLayout(component) {\n      this._markerElement = document.createElement('div');\n      this._markerElement.className = 'icon-content';\n      this._markerElement.style.display = 'inline-block';\n\n      _reactDom2.default.render(component, this._markerElement);\n\n      this._controller.setLayout('iconLayout', this._markerElement);\n    }\n  }, {\n    key: '_setupBalloonLayout',\n    value: function _setupBalloonLayout(component) {\n      this._balloonElement = document.createElement('div');\n\n      _reactDom2.default.render(component, this._balloonElement);\n\n      this._controller.setLayout('balloonLayout', this._balloonElement);\n    }\n  }, {\n    key: '_clearLayouts',\n    value: function _clearLayouts() {\n      if (this._markerElement) {\n        _reactDom2.default.unmountComponentAtNode(this._markerElement);\n\n        this._markerElement = null;\n      }\n\n      if (this._balloonElement) {\n        _reactDom2.default.unmountComponentAtNode(this._balloonElement);\n\n        this._balloonElement = null;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return MapMarker;\n}(_react.Component);\n\nMapMarker.propTypes = {\n  lat: _propTypes2.default.number.isRequired,\n  lon: _propTypes2.default.number.isRequired,\n  properties: _propTypes2.default.object,\n  options: _propTypes2.default.object,\n  balloonState: _propTypes2.default.oneOf(['opened', 'closed'])\n};\nMapMarker.defaultProps = {\n  balloonState: 'closed'\n};\nMapMarker.contextTypes = {\n  mapController: _propTypes2.default.object,\n  coordorder: _propTypes2.default.oneOf(['latlong', 'longlat'])\n};\nexports.default = (0, _decorators.eventsDecorator)(MapMarker, {\n  supportEvents: _geoObject2.default\n});","map":{"version":3,"sources":["E:/aca/isa/nasa-isa/ISA-projekat/ISA-front/node_modules/yandex-map-react/lib/MapMarker.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_propTypes","require","_propTypes2","_interopRequireDefault","_react","_react2","_reactDom","_reactDom2","_BalloonLayout","_BalloonLayout2","_MarkerLayout","_MarkerLayout2","_MarkerController","_MarkerController2","_geoObject","_geoObject2","_decorators","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","MapMarker","_Component","_this","getPrototypeOf","options","componentDidUpdate","prevProps","_this2","_props","lat","lon","children","properties","balloonState","_controller","setPosition","context","coordorder","keys","forEach","propName","setProperty","optName","setOption","setBalloonState","_clearLayouts","_setupLayouts","componentDidMount","_props2","coords","_setupEvents","mapController","appendMarker","componentWillUnmount","destroy","getController","_this3","Children","toArray","component","type","_setupBalloonLayout","_setupMarkerLayout","_markerElement","document","createElement","className","style","display","render","setLayout","_balloonElement","unmountComponentAtNode","Component","propTypes","number","isRequired","object","oneOf","defaultProps","contextTypes","eventsDecorator","supportEvents"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _BalloonLayout = require('./BalloonLayout');\n\nvar _BalloonLayout2 = _interopRequireDefault(_BalloonLayout);\n\nvar _MarkerLayout = require('./MarkerLayout');\n\nvar _MarkerLayout2 = _interopRequireDefault(_MarkerLayout);\n\nvar _MarkerController = require('./controllers/MarkerController');\n\nvar _MarkerController2 = _interopRequireDefault(_MarkerController);\n\nvar _geoObject = require('./apiEventsLists/geoObject');\n\nvar _geoObject2 = _interopRequireDefault(_geoObject);\n\nvar _decorators = require('./utils/decorators');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MapMarker = function (_Component) {\n    _inherits(MapMarker, _Component);\n\n    function MapMarker(props) {\n        _classCallCheck(this, MapMarker);\n\n        var _this = _possibleConstructorReturn(this, (MapMarker.__proto__ || Object.getPrototypeOf(MapMarker)).call(this, props));\n\n        _this.options = {};\n        return _this;\n    }\n\n    _createClass(MapMarker, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            var _this2 = this;\n\n            var _props = this.props,\n                lat = _props.lat,\n                lon = _props.lon,\n                children = _props.children,\n                properties = _props.properties,\n                options = _props.options,\n                balloonState = _props.balloonState;\n\n\n            if (lat !== prevProps.lat || lon !== prevProps.lon) {\n                this._controller.setPosition(this.context.coordorder === 'longlat' ? [lon, lat] : [lat, lon]);\n            }\n\n            Object.keys(properties || {}).forEach(function (propName) {\n                if (!prevProps.properties || properties[propName] !== prevProps.properties[propName]) {\n                    _this2._controller.setProperty(propName, properties[propName]);\n                }\n            });\n\n            Object.keys(options || {}).forEach(function (optName) {\n                if (!prevProps.options || options[optName] !== prevProps.options[optName]) {\n                    _this2._controller.setOption(optName, options[optName]);\n                }\n            });\n\n            this._controller.setBalloonState(balloonState);\n\n            if (children != prevProps.children) {\n                this._clearLayouts();\n                this._setupLayouts();\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _props2 = this.props,\n                lat = _props2.lat,\n                lon = _props2.lon,\n                properties = _props2.properties,\n                options = _props2.options,\n                balloonState = _props2.balloonState;\n\n            var coords = this.context.coordorder === 'longlat' ? [lon, lat] : [lat, lon];\n\n            this._controller = new _MarkerController2.default(coords, properties, options, balloonState);\n\n            this._setupLayouts();\n            this._setupEvents();\n\n            this.context.mapController.appendMarker(this._controller);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this._clearLayouts();\n            this._controller.destroy();\n        }\n    }, {\n        key: 'getController',\n        value: function getController() {\n            return this._controller ? this._controller : null;\n        }\n    }, {\n        key: '_setupLayouts',\n        value: function _setupLayouts() {\n            var _this3 = this;\n\n            _react2.default.Children.toArray(this.props.children).forEach(function (component) {\n                if (component.type === _BalloonLayout2.default) {\n                    _this3._setupBalloonLayout(component);\n                }\n                if (component.type === _MarkerLayout2.default) {\n                    _this3._setupMarkerLayout(component);\n                }\n            });\n        }\n    }, {\n        key: '_setupMarkerLayout',\n        value: function _setupMarkerLayout(component) {\n            this._markerElement = document.createElement('div');\n            this._markerElement.className = 'icon-content';\n            this._markerElement.style.display = 'inline-block';\n\n            _reactDom2.default.render(component, this._markerElement);\n            this._controller.setLayout('iconLayout', this._markerElement);\n        }\n    }, {\n        key: '_setupBalloonLayout',\n        value: function _setupBalloonLayout(component) {\n            this._balloonElement = document.createElement('div');\n\n            _reactDom2.default.render(component, this._balloonElement);\n            this._controller.setLayout('balloonLayout', this._balloonElement);\n        }\n    }, {\n        key: '_clearLayouts',\n        value: function _clearLayouts() {\n            if (this._markerElement) {\n                _reactDom2.default.unmountComponentAtNode(this._markerElement);\n                this._markerElement = null;\n            }\n\n            if (this._balloonElement) {\n                _reactDom2.default.unmountComponentAtNode(this._balloonElement);\n                this._balloonElement = null;\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return null;\n        }\n    }]);\n\n    return MapMarker;\n}(_react.Component);\n\nMapMarker.propTypes = {\n    lat: _propTypes2.default.number.isRequired,\n    lon: _propTypes2.default.number.isRequired,\n    properties: _propTypes2.default.object,\n    options: _propTypes2.default.object,\n    balloonState: _propTypes2.default.oneOf(['opened', 'closed'])\n};\nMapMarker.defaultProps = {\n    balloonState: 'closed'\n};\nMapMarker.contextTypes = {\n    mapController: _propTypes2.default.object,\n    coordorder: _propTypes2.default.oneOf(['latlong', 'longlat'])\n};\nexports.default = (0, _decorators.eventsDecorator)(MapMarker, { supportEvents: _geoObject2.default });"]},"metadata":{},"sourceType":"script"}